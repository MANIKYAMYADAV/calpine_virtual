
<section>
  <app-provider-subheader [activeTab]="'customers'"></app-provider-subheader> <!-- Subheader section -->
</section>
<section class="dashboard">
  <div class="container">
      <div class="row">
          <div class="card p0 w-dta customers">
              <div class="head">
                <span class="cust_count">{{customer_label  | capitalizeFirst}}s {{checkedin_label}}: {{customer_count}}</span>
              </div>
              <div class="dash-list">

                  <mat-accordion >
                    <mat-expansion-panel [expanded]="open_filter === true" [disabled]="'true'">
                      <mat-expansion-panel-header class="fltr" [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
                        <span (click)="toggleFilter()"  [matTooltipClass] = "tooltipcls" [matTooltip]="filtericonTooltip" *ngIf="!open_filter"><i class="icon-filter-one"></i></span>
                        <span (click)="toggleFilter()"  *ngIf="open_filter"><i class="icon-filter-one"></i></span>
                      </mat-expansion-panel-header>

                      <div class="form-group first_name">
                        <mat-form-field class="example-full-width">
                          <label class="col-form-label">First name</label>
                          <input matInput [(ngModel)]="filter.first_name" #Ffname (blur)="doSearch()" (keyup)="focusInput($event, Fmobile)" autocomplete="off">
                        </mat-form-field>
                      </div>
                      <div class="form-group mobile">
                        <mat-form-field class="example-full-width">
                          <label class="col-form-label">Mobile</label>
                          <input matInput [(ngModel)]="filter.mobile"  #Fmobile (blur)="doSearch()" (keyup)="focusInput($event, Femail)" autocomplete="off">
                        </mat-form-field>
                      </div>

                      <div class="form-group email">
                        <mat-form-field class="example-full-width">
                          <label class="col-form-label">Email</label>
                          <input matInput [(ngModel)]="filter.email"  #Femail (blur)="doSearch()" (keyup)="focusInput($event, Fdate)" autocomplete="off">
                        </mat-form-field>
                      </div>

                      <div class="check_in_date">
                        <label class="col-form-label" for="displayName">{{checkin_label |capitalizeFirst}} Date</label>
                        <mat-form-field>
                          <input matInput [(ngModel)]="filter.date" [matDatepicker]="picker" #Fdate
                          (dateChange)="doSearch()" autocomplete="off">
                          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                      </div>

                    </mat-expansion-panel>
                  </mat-accordion>
                  <div class="table-outer d-tbl">
                      <table class="table">
                          <thead>
                              <tr>
                                  <th>Name</th>
                                  <th>Mobile</th>
                                  <th>Email</th>
                                  <th>Last Visit</th>
                              </tr>
                          </thead>
                          <tbody>
                              <tr *ngFor="let customer of customers">

                                  <td data-title="Name" class="name">
                                    {{customer.consumer.userProfile.firstName}} {{customer.consumer.userProfile.lastName}}
                                  </td>
                                  <td data-title="Mobile" class="service"> {{customer.consumer.userProfile.primaryMobileNo}} </td>
                                  <td data-title="Email" class="email">{{customer.consumer.userProfile.email}}</td>

                                  <td data-title="Last Visit" class="lastvisit">
                                      {{customer.lastVisitedDate | date: dateFormat }}
                                  </td>
                              </tr>
                          </tbody>
                      </table>


                      <ng-container *ngIf="loadComplete && customers.length == 0">
                        <div class="qlst no-dta" >
                          You don't have any {{customer_label}}s
                        </div>
                      </ng-container>

                    <div class="search_paging"  *ngIf="loadComplete">
                      <app-pager [total_pages]="pagination.totalCnt" [pagesize]="pagination.perPage" (pagerclick)="handle_pageclick($event)" [curpage]="pagination.startpageval"></app-pager>
                    </div>

                  </div>

              </div>

          </div>
      </div>
  </div>
</section>
