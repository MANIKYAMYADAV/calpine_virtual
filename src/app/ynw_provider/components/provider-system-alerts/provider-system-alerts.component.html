<section>
    <!-- <app-provider-subheader [isCheckin]="isCheckin" [activeTab]="'settings'"></app-provider-subheader> -->
    <!-- Subheader section -->
    <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>
<section>
    <div class="content">
        <!-- <div class="logfil-outer">
                        <div class="formgroup-outer">
                            <div class="row">
                            <div class="form-group col-md-3  col-sm-6 col-lg-3" >
                                <mat-form-field>
                                    <mat-select placeholder="{{acknow_status_cap}}" [(ngModel)]="alertSelAck" name="catg">
                                        <mat-option value=""> {{any_cap}}</mat-option>
                                        <mat-option value="true">{{acknowledged_cap}}</mat-option>
                                        <mat-option value="false">{{not_acknowledged_cap}}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="form-group col-md-2 col-sm-4 col-lg-2">
                                

                                <mat-form-field>
                                    <input matInput [matDatepicker]="picker" name="alert-datepicker" [(ngModel)]="alertSeldate"
                                        [value]="alertSeldate" type="text" autocomplete="off" placeholder="{{select_date_cap}}"
                                        [max]="tday">
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker [disabled]="false"></mat-datepicker>
                                </mat-form-field>
                            </div>
                            
                            <div class="form-group col-md-7 col-sm-12 alrt"><button type="button" class="cs-btn bt3 mgn-bt-5" (click)="do_search(false)">{{search_cap}}</button>
                                <button class="cs-btn bt3" *ngIf="filterapplied" (click)="clearFilter()" [matTooltipClass]="tooltipcls" [matTooltip]="filtericonclearTooltip">Clear</button>
                            </div>
                        </div>
                        </div>
                        <div class="actions-div">
                           
                        </div> 
                              
                    </div> -->
                    <app-common-innerloading-spinner  *ngIf="api_loading"></app-common-innerloading-spinner>
        <div class="dashboard audit" *ngIf="!api_loading" >
            <div class="container">
                <div class="row">
                    <div class="card p0 w-dta">
                        <div class="table-responsive dash-list">
                            <table class="table">
                                <thead>
                                    <tr tble-filtr-tr>
                                        <th>{{subject_cap}}</th>
                                        <th>{{details_cap}}</th>
                                        <th>{{acknowledged_cap}}</th>
                                        <th>{{date_cap}}</th>
                                        <th>
                                            <table class="fltr-tbl">
                                                <tr>
                                                    <td class="cl-fltr" *ngIf="filterapplied === true"
                                                        (click)="clearFilter()" [matTooltipClass]="tooltipcls"
                                                        [matTooltipClass]="tooltipcls" [matTooltip]="'Reset filter'">
                                                        <img
                                                            src="../../../../assets/images/icons8-clear-filters-40.png" alt=""/>
                                                    </td>
                                                    <td>
                                                        <span>
                                                            <i class="icon-filter-one-op" (click)="toggleFilter()"
                                                                *ngIf="open_filter" [matTooltipClass]="tooltipcls"
                                                                [matTooltip]="'Close filter window'"></i>
                                                            <i class="icon-filter-one" (click)="toggleFilter()"
                                                                [matTooltipClass]="tooltipcls"
                                                                [matTooltip]="filtericonTooltip"
                                                                *ngIf="!open_filter"></i>
                                                        </span>
                                                    </td>
                                                </tr>
                                            </table>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="5" *ngIf="open_filter === true" class="tble-filtr-td">
                                            <mat-accordion>
                                                <mat-expansion-panel [expanded]="open_filter === true"
                                                    [disabled]="'true'">
                                                    <div class="form-group col-md-3  col-sm-6 col-lg-3">
                                                        <label  class="col-form-label">{{acknow_status_cap}}</label>
                                                        <mat-form-field>
                                                            <mat-select (selectionChange)= "do_search(false)"
                                                                [(ngModel)]="alertSelAck" name="catg">
                                                                <mat-option value=""> {{any_cap}}
                                                                </mat-option>
                                                                <mat-option value="true">
                                                                    {{acknowledged_cap}}</mat-option>
                                                                <mat-option value="false">
                                                                    {{not_acknowledged_cap}}</mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                    </div>
                                                    <div class="form-group col-md-2 col-sm-4 col-lg-2">
                                                        <label  class="col-form-label">Select Date</label>
                                                        <mat-form-field>
                                                            <input matInput [matDatepicker]="picker"
                                                                name="alert-datepicker" (dateChange)="do_search(false)"
                                                                [(ngModel)]="alertSeldate" [value]="alertSeldate"
                                                                autocomplete="off" [max]="tday" [min]="minday">
                                                            <mat-datepicker-toggle matSuffix [for]="picker">
                                                            </mat-datepicker-toggle>
                                                            <mat-datepicker #picker></mat-datepicker>
                                                        </mat-form-field>
                                                    </div>
                                                </mat-expansion-panel>
                                            </mat-accordion>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody>
                                    <ng-container *ngIf="alertStatus==1">
                                        <tr>
                                            <td class="spinner" colspan="5">
                                                <app-common-innerloading-spinner spinnerParams="loadingParams">
                                                </app-common-innerloading-spinner>
                                            </td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="alertStatus==2">
                                        <tr>
                                            <td class="nodatafound" colspan="5">{{no_alerts_found_cap}}</td>
                                        </tr>
                                    </ng-container>
                                    <ng-container *ngIf="alertStatus==3">
                                        <tr *ngFor="let alrt of alert_details">
                                            <td data-title="Subject" class="td1"
                                                [class.info]="alrt.severity.name=='Info'"
                                                [class.warning]="alrt.severity.name=='Warning'"
                                                [class.high]="alrt.severity.name=='High'"
                                                [class.error]="alrt.severity.name=='Critical'">
                                                {{alrt.subject}}</td>

                                            <td data-title="Details" class="td2"
                                                [class.info]="alrt.severity.name=='Info'"
                                                [class.warning]="alrt.severity.name=='Warning'"
                                                [class.high]="alrt.severity.name=='High'"
                                                [class.error]="alrt.severity.name=='Critical'">{{alrt.text}}
                                            </td>

                                            <td data-title="Act Status" class="td3"
                                                [class.info]="alrt.severity.name=='Info'"
                                                [class.warning]="alrt.severity.name=='Warning'"
                                                [class.high]="alrt.severity.name=='High'"
                                                [class.error]="alrt.severity.name=='Critical'">{{ (alrt.ackStatus) ?
                                                'Yes' : 'No'}}</td>

                                            <td data-title="Date" class="td4" [class.info]="alrt.severity.name=='Info'"
                                                [class.warning]="alrt.severity.name=='Warning'"
                                                [class.high]="alrt.severity.name=='High'"
                                                [class.error]="alrt.severity.name=='Critical'">{{alrt.createdOn |
                                                date:dateFormat}}</td>

                                            <td data-title="Action" class="td5"
                                                [class.info]="alrt.severity.name=='Info'"
                                                [class.warning]="alrt.severity.name=='Warning'"
                                                [class.high]="alrt.severity.name=='High'"
                                                [class.error]="alrt.severity.name=='Critical'"><span
                                                    class="fa fa-thumbs-o-up pointr" [matTooltip]="'Acknowledge'"
                                                    *ngIf="alrt.ackStatus==false && alrt.ackRequired==true"
                                                    (click)="alertAcknowledge(alrt)"></span></td>
                                        </tr>
                                    </ng-container>
                                </tbody>
                            </table>
                            <div class="search_paging" *ngIf="alert_details.length>0">
                                <app-pager [total_pages]="gettotalCnt()" [pagesize]="getperPage()"
                                    (pagerclick)="handle_pageclick($event)" [curpage]="startpageval">
                                </app-pager>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>