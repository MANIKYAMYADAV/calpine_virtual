<section>
    <app-provider-subheader [activeTab]="'settings'"></app-provider-subheader> <!-- Subheader section -->
    <app-breadcrumb [breadcrumbs]="breadcrumbs" [moreOptions]="breadcrumb_moreoptions"></app-breadcrumb>
</section>

<section>
    <div class="content comn-cls">
        <div class="container">
            <div class="row">
                <mat-tab-group dynamicHeight="true" class="paysettings-tab" [selectedIndex]="tabid"
                    (selectedIndexChange)="selectedIndexChange($event)">
                    <mat-tab label="Online Payment Settings">
                        <mat-radio-group class="" [(ngModel)]="optJaldeeAccount">
                            <div class="lbr mt-3  col-sm-12 col-md-12 col-lg-12">
                                <div class="rw">
                                    <div class="form-group">
                                        <mat-radio-button [value]="'enable'"></mat-radio-button>
                                        <label for="">{{jaldee_account_cap}}</label>
                                    </div>
                                </div>
                                <div class="rw">
                                    <div class="form-group" [ngClass]="{'disabledradio' :activeLicPkg<3}">
                                        <mat-radio-button [disabled]="activeLicPkg<3" [value]="'disable'"></mat-radio-button>
                                        <label for="">{{my_own_account_cap}}</label>
                                        <div *ngIf="optJaldeeAccount!='enable'">
                                            <div class="outermost">
                                                <!-- <div class='pay-outer'>
                                                <span class="ttle">
                                                    Online Payment Enabled? <span class="sts" [class.active]="paystatus==true">{{(paystatus==true)?'Yes':'No'}}</span>
                                                </span>
                                                <span class="ctrl"><mat-slide-toggle [checked]="paystatus" (change)="showhidepaytype()"></mat-slide-toggle></span>
                                            </div> -->
                                                <div class="no-dta" *ngIf="!emailidVerified && profileQueryExecuted">
                                                    <p>{{pay_if_mail_verified_cap}}</p>
                                                    <span class="cs-btn bt3" (click)="redirectToEmail()">{{go_to_mail_settings_cap}}</span>
                                                    <p></p>
                                                    <p>{{revisit_this_page_cap}}</p>
                                                </div>

                                                <div class='paymode-outer' *ngIf="emailidVerified">
                                                    <div class='paytm-outer'>
                                                        <div class="form-group">
                                                            <mat-checkbox class="pay-chk" [checked]="paytmenabled"
                                                                (change)="handleChange('pay')" [disabled]="!ineditMode"
                                                                tabindex="0">{{pay_tm_cap}}</mat-checkbox>
                                                            <span *ngIf="paytmverified && paytmenabled" class="verified">{{verified_cap}}</span><span
                                                                *ngIf="!paytmverified && paytmenabled" class="not-verified">{{not_verified_cap}}</span>
                                                        </div>
                                                        <div class='paytm-det row' *ngIf="paytmenabled">
                                                            <div class="col-sm-6 col-md-4 col-lg-4 col-12">
                                                                <div class="form-group">
                                                                    <label class="caption">Mobile #</label>
                                                                    <mat-form-field>
                                                                        <input matInput #paymobref [(ngModel)]="paytmmobile"
                                                                            (keypress)="resetApi('paytmmobile')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="paytmBlur()" tabindex="1">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['paytmmobile']['status']"
                                                                        [errorMsg]="showError['paytmmobile']['msg']"></app-field-error-display>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6 col-md-4 col-lg-4 col-12">
                                                                <div class="form-group">
                                                                    <label class="caption">Merchant Id</label>
                                                                    <mat-form-field>
                                                                        <input matInput #paytmidref [(ngModel)]="paytm_mid"
                                                                            (keypress)="resetApi('paytm_mid')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="paytmMidBlur()" tabindex="2">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['paytm_mid']['status']"
                                                                        [errorMsg]="showError['paytm_mid']['msg']"></app-field-error-display>
                                                                </div>
                                                            </div>
                                                            <div class="col-sm-6 col-md-4 col-lg-4 col-12">
                                                                <div class="form-group">
                                                                    <label class="caption">Merchant Key</label>
                                                                    <mat-form-field>
                                                                        <input matInput #paytmmkeyref [(ngModel)]="paytm_mkey"
                                                                            (keypress)="resetApi('paytm_mkey')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="paytmMkeyBlur()" tabindex="3">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['paytm_mkey']['status']"
                                                                        [errorMsg]="showError['paytm_mkey']['msg']"></app-field-error-display>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class='cc-outer'>
                                                        <div class="form-group">
                                                            <mat-checkbox class="pay-chk" [checked]="ccenabled"
                                                                (change)="handleChange('cc')" [disabled]="!ineditMode"
                                                                tabindex="2">{{cc_dc_netbanking_cap}}</mat-checkbox>
                                                            <span *ngIf="payuverified  && ccenabled" class="verified">{{verified_cap}}</span><span
                                                                *ngIf="!payuverified  && ccenabled" class="not-verified">{{not_verified_cap}}</span>
                                                        </div>
                                                        <div class='cc-det' *ngIf="ccenabled">
                                                            <div class='pan-outer'>
                                                                <div class="form-group">
                                                                    <label class="caption">{{pan_card_number_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="pannumber"
                                                                            (change)="resetApi('pannumber')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="panCardBlur()" tabindex="4">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['pannumber']['status']"
                                                                        [errorMsg]="showError['pannumber']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{name_on_pan_card_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="panname" (change)="resetApi('panname')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="panNameBlur()" tabindex="7">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['panname']['status']"
                                                                        [errorMsg]="showError['panname']['msg']"></app-field-error-display>
                                                                </div>
                                                            </div>
                                                            <div class='bank-outer'>
                                                                <div class="form-group">
                                                                    <label class="caption">{{account_holder_name_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput #acholdernameref [(ngModel)]="bankacname"
                                                                            (change)="resetApi('bankacname')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="acholderNameBlur()" tabindex="2">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankacname']['status']"
                                                                        [errorMsg]="showError['bankacname']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{bank_account_number_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="bankacnumber"
                                                                            (change)="resetApi('bankacnumber')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="bankAcnumberBlur()" tabindex="3">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankacnumber']['status']"
                                                                        [errorMsg]="showError['bankacnumber']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{bank_name_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="bankname" (change)="resetApi('bankname')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="bankNameBlur()" tabindex="5">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankname']['status']"
                                                                        [errorMsg]="showError['bankname']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{ifsc_code_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="bankifsc" (change)="resetApi('bankifsc')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="ifscBlur()" tabindex="6">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankifsc']['status']"
                                                                        [errorMsg]="showError['bankifsc']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{branch_name_cap}}</label>
                                                                    <mat-form-field>
                                                                        <input matInput [(ngModel)]="bankbranch"
                                                                            (change)="resetApi('bankbranch')"
                                                                            autocomplete="off" [disabled]="!ineditMode"
                                                                            (blur)="bankBranchBlur()" tabindex="8">
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankbranch']['status']"
                                                                        [errorMsg]="showError['bankbranch']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{business_filing_status_cap}}</label>
                                                                    <mat-form-field>
                                                                        <mat-select [(ngModel)]="bankfiling"
                                                                            (selectionChange)="resetApi('bankfiling')"
                                                                            [disabled]="!ineditMode" tabindex="9">
                                                                            <mat-option value="">{{select_cap}}</mat-option>
                                                                            <mat-option value="Proprietorship">{{proprietorship_cap}}</mat-option>
                                                                            <mat-option value="Individual">{{individual_cap}}</mat-option>
                                                                            <mat-option value="Partnership">{{partnership_cap}}</mat-option>
                                                                            <mat-option value="Privatelimited">{{pvt_ltd_cap}}</mat-option>
                                                                            <mat-option value="PublicLimited">{{public_ltd_cap}}</mat-option>
                                                                            <mat-option value="LLP">{{llp_cap}}</mat-option>
                                                                            <mat-option value="Trust">{{trust_cap}}</mat-option>
                                                                            <mat-option value="Societies">{{societies_cap}}</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankfiling']['status']"
                                                                        [errorMsg]="showError['bankfiling']['msg']"></app-field-error-display>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label class="caption">{{account_type_cap}}</label>
                                                                    <mat-form-field>
                                                                        <mat-select [(ngModel)]="bankactype"
                                                                            (selectionChange)="resetApi('bankactype')"
                                                                            [disabled]="!ineditMode" tabindex="10">
                                                                            <mat-option value="">{{select_cap}}</mat-option>
                                                                            <mat-option value="Current">{{current_cap}}</mat-option>
                                                                            <mat-option value="Saving">{{savings_cap}}</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                    <app-field-error-display [displayError]="showError['bankactype']['status']"
                                                                        [errorMsg]="showError['bankactype']['msg']"></app-field-error-display>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="actiondiv" *ngIf="saveEnabled && emailidVerified && profileQueryExecuted">
                                                    <button type="button" class="cs-btn bt2" (click)="handleEditPaySettings(false)"
                                                        *ngIf="ineditMode" tabindex="12">{{cancel_edit_cap}}</button>&nbsp;
                                                    <button type="button" mat-button class="cs-btn bt1" (click)="savePaySettings(false)"
                                                        *ngIf="ineditMode" tabindex="11">{{save_settings_cap}}</button>&nbsp;
                                                    <button type="button" mat-button class="cs-btn bt1" (click)="handleEditPaySettings(true)"
                                                        *ngIf="!ineditMode" tabindex="13">{{change_pay_settings_cap}}</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </mat-radio-group>
                        <div class="actiondiv" *ngIf="(!isJaldeeAccount && optJaldeeAccount==='enable') || (isJaldeeAccount && optJaldeeAccount==='disable' && (payuverified || paytmverified))">
                            <button type="button" mat-button class="cs-btn bt1" (click)="saveAccountPaymentSettings(optJaldeeAccount)">{{save_btn_cap}}</button>
                        </div>
                    </mat-tab>
                    <mat-tab label="Tax Settings">
                        <div class="outermost">
                            <div class="taxouter">

                                <div class="form-group gstval">
                                    <label class="caption">{{gst_no_cap}}</label>
                                    <mat-form-field>
                                        <input matInput [(ngModel)]="gstnumber" id="gstno" (keypress)="resetApi()"
                                            autocomplete="off" tabindex="14">
                                    </mat-form-field>
                                    <app-field-error-display [displayError]="showError['gstnumber']['status']"
                                        [errorMsg]="showError['gstnumber']['msg']"></app-field-error-display>
                                </div>

                                <div class="form-group">
                                    <label class="caption">{{tax_percentage_cap}}</label>
                                    <mat-form-field>
                                        <input matInput [(ngModel)]="taxpercentage" (keypress)="resetApi()" class="tax-per"
                                            autocomplete="off" tabindex="15">
                                        <span matSuffix>%</span>
                                    </mat-form-field>
                                    <app-field-error-display [displayError]="showError['taxpercentage']['status']"
                                        [errorMsg]="showError['taxpercentage']['msg']"></app-field-error-display>
                                </div>


                            </div>
                        </div>
                        <div class="actiondiv" *ngIf="savetaxEnabled">
                            <button type="button" mat-button class="cs-btn bt1" (click)="saveTaxSettings()" [disabled]="taxfieldValidation(false)"
                                tabindex="16">{{update_tax_cap}}</button>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
    </div>
</section>