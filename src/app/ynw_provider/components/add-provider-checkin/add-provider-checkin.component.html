<form [formGroup]="amForm"  novalidate
(ngSubmit)="amForm.valid &&
findCustomer(amForm.value)" (keyup)="resetApiErrors()" *ngIf="step==1">

  <div class="form-group">
    <label class="col-form-label" for="mobile">Mobile *</label>
    <input type="text" class="form-control" id="mobile" placeholder="Mobile"
    formControlName="mobile">
    <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'mobile')"
    errorMsg="Please enter valid mobile number.">
  </app-field-error-display>
  </div>

  <div class="form-group">
    <label class="col-form-label" for="name">First Name / Last Name *</label>
    <input type="text" class="form-control" id="name" placeholder="First Name / Last Name "
    formControlName="name">
    <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'name')"
    errorMsg="Please enter first name / last name.">
  </app-field-error-display>
  </div>

  <button  type="submit" mat-button
  [disabled]="!amForm.valid">Check</button>

</form>

<div *ngIf="step==2">
  <h4> {{customer_data.userProfile.firstName}} {{customer_data.userProfile.lastName}}</h4>
  <p> {{customer_data.userProfile.primaryMobileNo}}</p>
  <hr>
  <div class="float-left">
      Location
      <select (change)="onChangeLocationSelect($event)">
        <option *ngFor="let location of locations; let i = index" [value]="i"
        [selected]="selected_location && selected_location.id == location.id">
          {{location.place}}
        </option>
      </select>
  </div>

  <div class="float-left">
    Queues
    <select (change)="onChangeQueueSelect($event.target.value)">
      <option *ngFor="let queue of queues; let i = index" [value]="i"
      [selected]="selected_queue && selected_queue.id == queue.id">
        {{queue.name}}
      </option>
    </select>
  </div>

  <div class="float-left pt-10">
    Services
    <select (change)="onChangeService($event.target.value)">
      <option *ngFor="let service of services; let i = index" [value]="i"
      [selected]="selected_service && selected_service.id == service.id">
        {{service.name}}
      </option>
    </select>
  </div>
  <p class="pt-10" *ngIf="selected_service">Service price : {{selected_service.totalAmount | currency:'INR':'symbol':'.2-2'}}</p>
  <p class="pt-10"> Estimated wait time: </p>
  <p>Service for whom ? </p>
  <angular2-multiselect [data]="dropdownList"
  [(ngModel)]="selectedItems"
  [settings]="dropdownSettings"
   (onSelect)="onItemSelect($event)"
   *ngIf="dropdownList.length > 0"></angular2-multiselect>
   <button (click)="addMember()">Add new member</button>


  <button (click)="addWaitlist()">Check In Now</button>

</div>


<app-field-error-display [displayError]="true" *ngIf="api_error"
errorMsg="{{api_error}}"></app-field-error-display>

<app-form-success-display [displayMsg]="true" *ngIf="api_success"
successMsg="{{api_success}}"></app-form-success-display>
