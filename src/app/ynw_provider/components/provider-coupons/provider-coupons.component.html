<section>
    <app-provider-subheader [activeTab]="'settings'"></app-provider-subheader> <!-- Subheader section -->
    <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>

<section>
    <div class="content comn-cls">
        <div class="container">
            <mat-tab-group dynamicHeight="true" class="paysettings-tab" [selectedIndex]="tabid">
                <mat-tab label="Jaldee coupons">
                    <!-- <div class="no-dta" *ngIf="jaldeecoupon_list.length == 0 && query_executed == true">
                                        <p>No Jaldee coupons exists</p>
                                        <span class="cs-btn bt3" (click)="addCoupons()">Add Coupons</span>
                                </div>
                                <div class="w-dta" *ngIf="jaldeecoupon_list.length>0"> -->
                    <div class="row">
                        <div class="card">
                            <div class="copy">
                                <div class="n-loc">
                                    <span class="add-nloc cs-btn bt3" (click)="reports()">{{reports_cap}}</span>
                                </div>
                                <div class="table-outer q-tbl">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>{{name_cap}}</th>
                                                <th>{{code_cap}}</th>
                                                <th>{{valid_from_cap}}</th>
                                                <th>{{valid_to_cap}}</th>
                                                <th>{{consumers_apply_cap}}</th>
                                                <th>{{provid_apply_cap}}</th>
                                                <th>{{status_cap}}</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let jaldeecoupon of jaldeecoupon_list">
                                                <td data-title="name" id="Id" class="td1" class="pointer-cursor"
                                                    (click)="couponView(jaldeecoupon.jc_code)">{{jaldeecoupon.couponName}}</td>
                                                <td data-title="code" class="pointer-cursor" class="td1">{{jaldeecoupon.jaldeeCouponCode}}</td>
                                                <td data-title="Valid From" class="pointer-cursor" class="td1">{{jaldeecoupon.startDate}}</td>
                                                <td data-title="Valid To" class="pointer-cursor" class="td1">{{jaldeecoupon.endDate}}</td>
                                                <td data-title="consumers# applied" class="pointer-cursor" class="td1"></td>
                                                <td data-title="providers# applied" class="pointer-cursor" class="td1"></td>
                                                <td data-title="coupon Status" class="pointer-cursor" class="td1">
                                                    <span class="icon-enable" *ngIf="jaldeecoupon.couponStatus=='Active'">
                                                        {{enable_cap}}</span>
                                                    <span class="icon-disable" *ngIf="jaldeecoupon.couponStatus=='DISABLED'">
                                                        {{disable_cap}}</span>
                                                </td>
                                                <td data-title="Status icon" class="pointer-cursor" class="td1">
                                                    <button type="button" mat-icon-button [matMenuTriggerFor]="menu">
                                                        <mat-icon>more_vert</mat-icon>
                                                    </button>
                                                    <mat-menu #menu="matMenu">
                                                        <button type="button" (click)="changecouponStatus(jaldeecoupon)"
                                                            mat-menu-item>
                                                            <i *ngIf="jaldeecoupon.couponStatus=='DISABLED'" class="icon-enable"></i>
                                                            <i *ngIf="jaldeecoupon.couponStatus=='Active'" class="icon-disable"></i>
                                                            <span> {{(jaldeecoupon.couponStatus=='Active') ? 'Disable' :' Enable'}}</span>
                                                        </button>
                                                    </mat-menu>
                                                    <!-- <span class="mbt-mobile-show">
                                                            <button [class.enableicon]="jaldeecoupon.couponStatus=='DISABLED'" [class.disableicon]="jaldeecoupon.couponStatus=='Active'" type="button" (click)="changecouponStatus(jaldeecoupon)">{{(jaldeecoupon.couponStatus=='Active') ? 'Disable' :' Enable'}}</button>
                                                        </span> -->
                                                </td>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--   </div>-->
                </mat-tab>

                <mat-tab label="My Coupons">
                    <div class="no-dta" *ngIf="coupon_list.length ==0 && query_executed == true">
                        <p>{{emptyMsg}}</p>
                        <span class="cs-btn bt3" (click)="addCoupons()">{{add_coupon_btn}}</span>
                    </div>
                    <div class="w-dta" *ngIf="coupon_list.length>0">
                        <div class="row">
                            <div class="card">
                                <div class="copy">
                                    <div class="table-outer q-tbl">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>{{name_cap}}</th>
                                                    <th>{{value_cap}}</th>
                                                    <th><span class="addbt" (click)="addCoupons()"></span></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let coupon of coupon_list">
                                                    <td data-title="Name" class="pointer-cursor" class="td1">{{coupon.name}}</td>
                                                    <td data-title="Value" class="pointer-cursor" clas="td2">{{(coupon.calculationType=='Percentage')?
                                                        coupon.amount+'%': formatPrice(coupon.amount)}}</td>
                                                    <td class="action">
                                                        <span class="mbt">
                                                            <button type="button" mat-icon-button [matMenuTriggerFor]="menu">
                                                                <mat-icon>more_vert</mat-icon>
                                                            </button>
                                                            <mat-menu #menu="matMenu">
                                                                <button type="button" (click)="editCoupons(coupon)"
                                                                    mat-menu-item>
                                                                    <i class="icon-edit"></i>
                                                                    {{edit_btn}}
                                                                </button>
                                                                <button type="button" (click)="doRemoveCoupons(coupon)"
                                                                    mat-menu-item>
                                                                    <i class="icon-delete"></i>
                                                                    {{delete_btn}}
                                                                </button>
                                                            </mat-menu>
                                                        </span>
                                                        <span class="mbt-mobile-show">
                                                            <button class="editcls" type="button" (click)="editCoupons(coupon)">{{edit_btn}}</button>
                                                            <button class="deletecls" type="button" (click)="doRemoveCoupons(coupon)">{{delete_btn}}</button>
                                                        </span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <span class="addbt d-block d-md-none" (click)="addCoupons()"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </div>
    </div>
</section>