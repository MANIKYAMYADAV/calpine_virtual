<form [formGroup]="amForm" novalidate (ngSubmit)="amForm.valid &&
onSubmit(amForm.value)" (keyup)="resetApiErrors()">
    <h1 class="mat-dialog-title">{{location_cap}} <span *ngIf="forbadge">{{amenities_cap}}</span> <button #loc
            mat-dialog-close class="modal_close" tabindex="-1"><i class="fa fa-window-close" aria-hidden="true"></i></button></h1>
    <mat-dialog-content>
        <ng-container *ngIf=" data && !forbadge">
            <div class="form-group mapselection">
                <button type="button" (click)="showGooglemap()" class="cs-btn bt3" tabindex="-1"><i data-icon="j"></i>{{location_map_cap}}</button>
                <span class="expl">{{location_map_message}}</span>
            </div>
            <div class="form-group">
                <!-- <mat-form-field class="example-full-width"> -->
                <label class="col-form-label">{{location_name}}</label>
                <input class="form-control" formControlName="locname" autocomplete="off" maxlength="50" placeholder="Enter your precise location">
                <!-- </mat-form-field> -->
                <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'locname')" [errorMsgs]="fed_service.getErrorMessage(amForm,'locname',
            {
            'required' : 'Please enter the location name',
            'pattern' : 'Please enter the location name'
            })">
                </app-field-error-display>
            </div>
            <div class="form-group">
                <mat-form-field class="example-full-width">
                    <label class="col-form-label">{{latitude_cap}}</label>
                    <input matInput type="text" placeholder="Latitude *" formControlName="loclattitude" autocomplete="off">
                </mat-form-field>
                <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'loclattitude')" [errorMsgs]="fed_service.getErrorMessage(amForm,'loclattitude',
            {
            'required' : 'Please enter the latitude',
            'pattern' : 'Please enter a valid lattitude'
            })">
                </app-field-error-display>
            </div>
            <div class="form-group">
                <mat-form-field class="example-full-width">
                    <label class="col-form-label">{{longitude_cap}}</label>
                    <input matInput type="text" placeholder="Longitude *" formControlName="loclongitude" autocomplete="off">
                </mat-form-field>
                <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'loclongitude')" [errorMsgs]="fed_service.getErrorMessage(amForm,'loclongitude',
            {
            'required' : 'Please enter the longitude',
            'pattern' : 'Please enter a valid longitude'
            })">
                </app-field-error-display>
                <!-- <button (click)="showGooglemap()" type="button" mat-button>Show Map</button> -->
            </div>
            <div class="form-group">
                <mat-form-field class="example-full-width">
                    <label class="col-form-label">{{address_cap}}</label>
                    <!-- <input matInput type="text" placeholder="Address" formControlName="locaddress"> -->
                    <textarea matInput formControlName="locaddress" row="4"></textarea>
                </mat-form-field>
                <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'locaddress')" [errorMsgs]="fed_service.getErrorMessage(amForm,'locaddress',
            {
            'required' : 'Please enter address',
            'maxlength' : 'Please enter less than 200 characters'
            })">
                </app-field-error-display>
                <!-- <button mat-button (click)="getCoordinatesFromAddress()" type="button" [disabled]="checkAddressExists()">Get Map Coordinates</button> -->
            </div>
            <!-- <div class="form-group">
            <mat-form-field class="example-full-width">
                <label class="col-form-label">Pincode</label>
                <input matInput type="text" placeholder="Pincode" formControlName="locpincode">
        </mat-form-field>
            <app-field-error-display [displayError]="fed_service.isFieldValid(amForm,'locpincode')"
            errorMsg="Please enter the pincode">
            </app-field-error-display>
        </div> -->
            <div class="form-group">
                <mat-form-field class="example-full-width">
                    <label class="col-form-label">{{map_url_cap}}</label>
                    <input class="nofocus" matInput type="text" placeholder="Google Map URL" formControlName="locmapurl"
                        autocomplete="off" tabindex="-1">
                </mat-form-field>
            </div>
            <!-- <div class="form-group mb0" *ngIf="schedule_alreadyexists_for_location==false && data_source != 'bprofile'">  -->
            <div class="form-group mb0" *ngIf="schedule_alreadyexists_for_location==false && data_source != 'bprofile'">
                <label class="col-form-label">{{schedule_cap}}</label>
                <div class="jd_stw" *ngIf="this.activeSchedules.length>0">
                    <span class="whrs">{{existing_schedule_cap}}
                        <span class="item" *ngFor="let schedule of this.activeSchedules">
                            <span class="day">{{schedule.dstr}}</span>&nbsp;<span class="time">{{schedule.time}}</span>
                        </span>]
                    </span>
                </div>

            </div>
            <!-- <app-provider-schedule *ngIf="schedule_alreadyexists_for_location==false && data_source != 'bprofile'" [existingSchedules] = "schedule_arr" [hidecancelbutton]="'1'" providerStatus="INACTIVE" (saveScheduleClick)="handlesSaveschedule($event)"></app-provider-schedule> -->
            <app-provider-schedule *ngIf="schedule_alreadyexists_for_location==false && proceedwithschedule" [Isource]="'wizard'"
                [existingSchedules]="schedule_arr" [hidecancelbutton]="'1'" providerStatus="INACTIVE"
                (saveScheduleClick)="handlesSaveschedule($event)"></app-provider-schedule>
        </ng-container>
        <ng-container *ngIf="forbadge">
            <div class="form-group">
                <mat-checkbox formControlName="loct24hour">{{open_cap}}</mat-checkbox>
            </div>

            <div *ngIf="data.type=='edit'">
                <div class="form-group" *ngFor="let badge of loc_badges">
                    <mat-checkbox (change)="handle_badge_click(badge)" [checked]="checkbadgealreadyselected(badge)">{{badge.displayName}}</mat-checkbox>
                </div>
            </div>
            <div class="form-group" #badgediv>
                <mat-form-field>
                    <label>{{parking_type_cap}}</label>
                    <mat-select placeholder="Select Parking Type*" formControlName="locparkingtype">
                        <mat-option *ngFor="let ptype of parking_types" [value]="ptype.value">
                            {{ptype.displayName }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </ng-container>

    </mat-dialog-content>
    <mat-dialog-actions>
        <button type="button" mat-dialog-close class="cs-btn bt2">{{cancel_btn}}</button>
        <button type="submit" mat-button [disabled]="!amForm.valid" class="cs-btn bt1">{{save_btn}}</button>
    </mat-dialog-actions>
    <app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}"></app-field-error-display>

    <app-form-success-display [displayMsg]="true" *ngIf="api_success" successMsg="{{api_success}}"></app-form-success-display>
</form>