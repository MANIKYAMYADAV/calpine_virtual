<section>
  <app-provider-subheader [activeTab]="'settings'"></app-provider-subheader> <!-- Subheader section -->
  <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>
<section class="dashboard report">
  <div class="container">
    <div class="row">
      <div class="card w-dta">
        <div class="dash-list">
          <h5>{{reimburse_report_cap}}</h5>
          <mat-accordion>
            <mat-expansion-panel [expanded]="open_filter === true" [disabled]="'true'">
              <mat-expansion-panel-header class="fltr" [collapsedHeight]="'40px'" [expandedHeight]="'40px'">
                <span *ngIf="open_filter === true" (click)="toggleFilter()"><i class="icon-filter-one"></i></span>
                <span *ngIf="open_filter === false" (click)="toggleFilter()"><i class="icon-filter-one"></i></span>
              </mat-expansion-panel-header>
              <div class="check_in_date end_date">
                <label class="col-form-label" for="displayName">Date From</label>
                <mat-form-field>
                  <input matInput [(ngModel)]="filter.from_date" [matDatepicker]="picker" (dateChange)="checkFilterDateMaxMin('from_date')"
                    [min]="filter_date_start_min" [max]="filter_date_start_max" autocomplete="off">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="check_in_date end_date">
                <label class="col-form-label" for="displayName">Date To</label>
                <mat-form-field>
                  <input matInput [(ngModel)]="filter.to_date" [matDatepicker]="picker1" (dateChange)="checkFilterDateMaxMin('to_date')"
                    [min]="filter_date_end_min" [max]="filter_date_end_max" autocomplete="off">
                  <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                  <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="form-group">
                <label class="col-form-label" for="displayName">{{status_cap}}</label>
                <mat-form-field>
                  <mat-select [(value)]="filter.pay_status" #Fstatus>
                    <mat-option (click)="setFilterData('status', 'all')" [value]="'all'">
                      {{all_cap}}
                    </mat-option>
                    <mat-option *ngFor="let status of all_status" (click)="setFilterData('status', status)" [value]="status">
                      <!-- <span class="day_label">{{queue.displayschedule.dstr}}</span> -->
                      <span class="time_label">{{status}}</span>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </mat-expansion-panel>
          </mat-accordion>

          <div class="table-outer q-tbl" *ngIf="couponreport.length != 0">
            <table class="table">
              <thead>
                <tr>
                  <th>{{report_id_cap}}</th>
                  <th>{{time_period_cap}}</th>
                  <th>{{coup_use_cap}}</th>
                  <th>{{j_acc_cap}}</th>
                  <th>{{reimburse_amt_cap}}</th>
                  <th>Grant Total</th>
                  <th>{{status_cap}}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let report of couponreport">
                  <td data-title="Id" class="td1" class="pointer-cursor" (click)="reportView(report.invoiceId)">{{report.invoiceId}}</td>
                  <td data-title="Period" class="pointer-cursor" class="td1">{{formatDateDisplay(report.reportFromDate)}}
                    - {{formatDateDisplay(report.reportEndDate)}}</td>
                  <td data-title="coupons Used" class="pointer-cursor" class="td1">{{report.listOfJaldeeCoupons}}</td>
                  <td data-title="Jaldee" class="pointer-cursor" class="td1">{{report.subTotalJaldeeBank}}</td>
                  <td data-title="Amount" class="pointer-cursor" class="td1">{{report.subTotalJaldeeCoupons}}</td>
                  <td data-title="Amount" class="pointer-cursor" class="td1">{{report.grantTotal}}</td>
                  <td>
                    <div *ngIf="report.status=='PAYMENTPENDING'">
                      <span class="add-nloc cs-btn bt3" (click)="openrequestModal(report.invoiceId)">{{req_payment_cap}}</span>
                    </div>
                    <div *ngIf="report.status!='PAYMENTPENDING'">
                      {{report.status}}
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="search_paging">
              <app-pager [total_pages]="pagination.totalCnt" [pagesize]="pagination.perPage" (pagerclick)="handle_pageclick($event)"
                [curpage]="pagination.startpageval"></app-pager>
            </div>
          </div>
        </div>
        <div *ngIf="couponreport.length == 0">
          No reports
        </div>
      </div>
    </div>
  </div>
</section>