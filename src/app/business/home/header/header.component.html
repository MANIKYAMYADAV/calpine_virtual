<header class="main-header jaldee-header">
  <a (click)="gotoActiveHome()" class="logo hidden-xs pointer-cursor">
    <span class="logo-mini"><img src="assets/images/home/logo-business.png" alt="Jaldee"></span>
    <span class="logo-lg"><img src="assets/images/jaldee-businesslogo.png" alt="Jaldee"></span>
  </a>
  <nav class="navbar navbar-static-top" role="navigation">
    <a (click)="gotoActiveHome()" class="visible-xs logo-mini-app pointer-cursor pull-left">
      <img src="./assets/images/home/logo-business.png" alt="Jaldee" />
    </a>
    <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button" *ngIf="!iswiz">
      <span class="sr-only">Toggle navigation</span>
    </a>

    <div class="navbar-custom-menu">
      <ul class="nav navbar-nav">
        <li [matTooltip]="'Go back to branch'" *ngIf="!iswiz && accountType === 'BRANCH_SP' && sessionStorage">
          <a (click)="gotoBranch()" class="dropdown-toggle pointer-cursor" data-toggle="dropdown">
            <i class="fa fa-arrow-left"></i>
          </a>
        </li>
        <li *ngIf="!iswiz">
          <a (click)="helpClicked()">
            <i class="fa contact-help-icon"></i>
            <div joyrideStep="step4" title="Reach Out To Us" [stepContent]="text4"></div>
            <ng-template #text4>
              <div>
                We offer free support and we are always ready to help.<br>
                <br>
                Call us at- <span style="color: white;"><b>+91 888-012-5000</b></span><br>
                Email us at- <span style="color: white;"><b>support@jaldee.com</b></span>

              </div>
            </ng-template>
          </a>
        </li>
        <li [matTooltip]="'Messages'" class="dropdown messages-menu" *ngIf="!iswiz">
          <a (click)="gotoInbox()" class="dropdown-toggle pointer-cursor" data-toggle="dropdown">
            <i class="fa fa-envelope-o"></i>
            <span class="label label-success"
              *ngIf="inboxCntFetched==true && inboxUnreadCnt>0">{{inboxUnreadCnt}}</span>
          </a>
        </li>
        <li [matTooltip]="'Alerts'" class="dropdown notifications-menu" *ngIf="!iswiz">
          <a (click)="gotoAlerts()" class="dropdown-toggle pointer-cursor" data-toggle="dropdown">
            <i class="fa fa-bell-o"></i>
            <span class="label label-warning" *ngIf="alertCnt > 0">{{alertCnt}}</span>
          </a>
          <ul class="dropdown-menu" *ngIf="alertCnt > 0">
            <li>
              <ul class="menu">
                <li *ngFor="let alert of alerts">
                  <p [class.info]="alert.severity.name=='Info'" [class.warning]="alert.severity.name=='Warning'"
                    [class.high]="alert.severity.name=='High'" [class.error]="alert.severity.name=='Critical'"
                    class="justify-alert">
                    {{alert.text}} <i class="fa fa-thumbs-o-up alert-ack" [matTooltip]="'Acknowledge'"
                      *ngIf="alert.ackStatus==false && alert.ackRequired==true" (click)="alertAcknowlege(alert)"></i>
                  </p>
                </li>
              </ul>
            </li>
            <li class="footer"><a href="#" routerLink="alerts">Go to Alerts</a></li>
          </ul>
        </li>
        <li [matTooltip]="'Subscription Plan'" class="dropdown tasks-menu" *ngIf="!iswiz">
          <a (click)="gotoLicense()" class="dropdown-toggle pointer-cursor" data-toggle="dropdown">
            <i class="icon-license"></i>
          </a>
          <ul class="dropdown-menu"
            *ngIf="licenseDetails && licenseDetails.accountLicense && licenseDetails.accountLicense.licPkgOrAddonId!=6">
            <li class="header">
              <p *ngIf="licenseDetails && licenseDetails.accountLicense && licenseDetails.accountLicense.licPkgOrAddonId==9 && license_message != ''"
                style="color: red; width: 100%; text-align: left;">
                Your {{licenseDetails.accountLicense.displayName}} license package will expire {{license_message}}.
                <span style="color: #00aef2"> <span (click)="upgradeMembership()" class="pointer-cursor"><b>Click here
                    </b></span><span style="color: red"> to Upgrade License.</span></span>
              </p>
              <p style="width: 100%; text-align: left;"
                *ngIf="licenseDetails && licenseDetails.accountLicense && licenseDetails.accountLicense.licPkgOrAddonId!=9">
                Your current license is
                <i style="color:red">{{licenseDetails.accountLicense.displayName}}.</i><span> Upgrade license </span>
                for more features.
              </p>
            </li>
            <li
              *ngIf="licenseDetails && licenseDetails.accountLicense && licenseDetails.accountLicense.licPkgOrAddonId!=9">
              <ul class="menu pointer-cursor">
                <li>
                  <a (click)="upgradeMembership()">
                    <h3 style="align-content: center">
                      <span class="link"> <b> Upgrade license </b></span>
                    </h3>
                  </a>
                </li>
              </ul>
            </li>
            <li class="footer">
              <a class="pointer-cursor" routerLink="license">Go to license section</a>
            </li>
          </ul>
        </li>
        <li class="dropdown user user-menu">
          <a class="dropdown-toggle pointer-cursor user-active-icon" data-toggle="dropdown">
            <span class="fa-stack">
              <i class="fa fa-circle fa-stack-2x text-success"
                *ngIf="(qAvailability && qAvailability.availableNow) || (scheduleAvailability && scheduleAvailability.availableNow)"></i>
              <i class="fa fa-circle fa-stack-2x  text-failure"
                *ngIf="qAvailability && !qAvailability.availableNow && !qAvailability.timeRange && scheduleAvailability && !scheduleAvailability.availableNow && !scheduleAvailability.timeRange"></i>
              <i class="fa fa-user fa-stack-1x fa-inverse"></i>
            </span>
            <span class="hidden-xs mgn-lt-3" *ngIf="bname">
              {{ (bname.length>15)? (bname | slice:0:15)+'...':bname }}
            </span>
          </a>
          <ul class="dropdown-menu">
            <li class="user-header " style="height: 179px !important;">
              <img [src]="blogo" class="img-circle pointer-cursor" alt="" (click)="gotoProfile()">

              <p class="pointer-cursor" (click)="gotoProfile()">
                <ng-container *ngIf="bname"> {{ (bname.length>15)? (bname | slice:0:15)+'...':bname }} </ng-container>
                <small>{{bsector}} ({{bsubsector}})</small>
              </p>
              <p><small>
                  <a routerLink="settings/q-manager/queues" class="white"
                    *ngIf="(qAvailability && qAvailability.availableNow) || (scheduleAvailability && scheduleAvailability.availableNow)">
                    <span class="white bold">I am available now</span>
                  </a>
                  <a routerLink="settings/q-manager/queues" class="white"
                    *ngIf="qAvailability && !qAvailability.availableNow && !qAvailability.timeRange && scheduleAvailability && !scheduleAvailability.availableNow && !scheduleAvailability.timeRange">
                    <span class="white bold"> I am not available now </span>
                  </a>
                </small>
              </p>
            </li>
            <li class="user-footer">
              <div class="pull-left" *ngIf="!iswiz">
                <a (click)="redirectto('bprofile')" class="btn btn-default btn-flat pointer-cursor btst">My Account</a>
              </div>
              <div class="pull-right">
                <a (click)="doLogout()" class="btn btn-default btn-flat pointer-cursor btst">Sign out</a>
              </div>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>
</header>