
<section class="">
    <div class="card title-gb rounded-0">
      <h5 class="mgn-up-10">
        <span class="fa fa-arrow-left pointer-cursor" (click)="goBack()"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Edit order &nbsp;&nbsp;<i style="color:blue">{{uid}}</i>
      </h5>
    </div>
  </section>
  <section>

  <div class="d-flex flex-column-fluid mt-4">
    <div class="container">
      <div class="card card-custom rounded-0 p-0">
        <div class="card-body p-0 rounded-0">
    <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
    <div class="content  p0 loc-list p-checkin ynw-common-form-nm" *ngIf="!loading">
      <div class="col-md-12 no-padding-small">
              <div class="flex-row-fluid">
                <div>
                  <div class="card-header flex-wrap border-0 pt-6 pb-0">
                    <h3 class="card-title align-items-start flex-column">
                      <span class="card-label font-weight-bolder font-size-h3 text-dark">Order Summary
                      </span>
                    </h3>
                  </div>

                  <div class="card-body p-0">

                    <div class="table-responsive">
                      <table class="table">

                        <thead>
                          <tr>
                            <th>Product</th>
                            <th class="text-center">Qty</th>
                            <th class="text-right">Price</th>
                            <th></th>
                          </tr>
                        </thead>


                        <tbody>

                          <tr *ngFor="let item of orders">
                            <td class="d-flex align-items-center font-weight-bolder">

                              <div class="symbol symbol-60 flex-shrink-0 mr-4 bg-light"   >
                                <div class="symbol-label" [style.background-image]="'url('+getItemImg(item)+')'">
                                </div>
                              </div>

                              <a class="text-dark text-hover-primary">{{ item.item.displayName }}
                              </a>
                            </td>
                            <td class="text-center align-middle">
                              <a href="javascript:;" class="btn btn-xs btn-light-primary btn-icon mr-2"  (click)="decrement(item);">
                                <i class="ki ki-minus icon-xs"></i>
                              </a>
                              <span class="mr-2 font-weight-bolder">{{ getItemQty(item) }}</span>
                              <a href="javascript:;" class="btn btn-xs btn-light-primary btn-icon" (click)="increment(item);">
                                <i class="ki ki-plus icon-xs"></i>
                              </a>
                            </td>
                            <td class="text-right align-middle font-weight-bolder font-size-h5">
                             {{ getItemPrice(item) }}
                            </td>
                            <td class="text-right align-middle"(click)="removeItemFromCart(item)" >
                              <a class="btn btn-danger font-weight-bolder font-size-sm">
                                Remove
                              </a>
                            </td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                    <div class="row col-md-6">
                      <button> Add more Items</button>

                    </div>

                    <div class="row justify-content-center bg-gray-100 py-2 px-2 py-md-4 px-md-0 mx-0">
                      <div class="col-md-10 ln-ht-2"  *ngIf="home_delivery && store_pickup">
                        <div class="text-muted">DELIVERY TYPE</div>
                        <ng-container *ngIf="home_delivery && store_pickup">
                        <mat-radio-group [(ngModel)]="choose_type" (change)="changeType($event)" name="choose_type">
                          <mat-radio-button [value]="'store'" [checked]="storeChecked">
                            Store pick up
                          </mat-radio-button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                          <mat-radio-button [value]="'home'" [checked]="!storeChecked">
                            Home delivery
                          </mat-radio-button>
                        </mat-radio-group>
                      </ng-container>
                      <div *ngIf="store_pickup && !home_delivery">
                        Store Pickup
                      </div>
                      <div *ngIf="home_delivery && !store_pickup">
                        Home delivery
                      </div>
                        <div class="text-muted">DATE/TIME
                          <div class="fl-right"><a (click)="changeTime()">Change</a></div>
                        </div>
                        <div>
                          <span *ngIf="!isFuturedate">Today ,</span>
                          <span *ngIf="!isFuturedate">
                            {{nextAvailableTime}}
                          </span>
                          <span *ngIf="isFuturedate">{{sel_checkindate | date: newDateFormat}},
                          </span>
                          <span *ngIf="isFuturedate">
                            {{nextAvailableTime}}
                          </span>
                        </div>


                                                      <ng-container *ngIf="(home_delivery && !store_pickup) || choose_type =='home' ">
                                                      <div  *ngFor="let address of added_address; let i = index" (click)="highlight(i,address)" [ngClass]="{'highlight': selectedRowIndex == i}">
                                                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 mt-5 mb-4">
                                                            <div
                                                                class="card card-custom gutter-b rounded-0 card-stretch p-2">
                                                                <div
                                                                    class="card-body text-left pl-5 p-0 font-addrss">
                                                                    <div class="adrs-data">
                                                                      <div>{{address.firstName }}&nbsp;{{address.lastName}}</div>
                                                                      <div>{{address.address}}</div>
                                                                      <div>{{address.city}} ,{{address.landMark}}, {{address.postalCode}}</div>
                                                                      <div> +91 {{address.phoneNumber}}</div>
                                                                      <div> {{address.email}}</div>
                                                                    </div>
                                                                    <button class="add-adrs-btn" mat-flat-button (click)="updateAddress(address,i)">
                                                                      Edit
                                                                    </button> &nbsp;
                                                                    <button class="add-adrs-btn" mat-flat-button (click)="deleteAddress(address,i)">
                                                                     Delete
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 mt-5 mb-4">
                                                            <div
                                                                class="card card-custom gutter-b rounded-0 card-stretch p-2">
                                                                <div
                                                                    class="card-body text-center p-0">
                                                                    <button type="button" class="btn btn-success px-2 py-1" (click)=addAddress();>
                                                                        Add New </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    </ng-container>



                      </div>

                    </div>

                    <div>
                      <form>
                        <div class="form-group row mt-5">
                          <div class="col-md-3 d-flex align-items-center">
                            <label class="font-weight-bolder">Apply Promo code
                            </label>
                          </div>
                          <div class="col-md-7">
                            <div class="input-group w-100">
                              <input type="text" class="form-control" placeholder="Voucher Code">
                              <div class="input-group-append">
                                <button class="btn btn-secondary line-height-sm" type="button">Apply</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>

                    <div class="d-flex flex-column mb-10 mb-md-0 mt-5">
                      <div class="font-weight-bolder font-size-lg mb-3">SUMMARY</div>

                      <div class="d-flex justify-content-between mb-3">
                        <span class="mr-15 font-weight-bold">Price </span>
                        <span class="text-right">{{getTotalItemPrice()}}</span>
                      </div>
                      <div class="d-flex justify-content-between mb-3" *ngIf="catalog_details.taxPercentage && totaltax !=0 ">
                        <span class="mr-15 font-weight-bold">Tax</span>
                        <span class="text-right">{{getTotalItemTax(catalog_details.taxPercentage)}}</span>
                      </div>
                      <div class="d-flex justify-content-between mb-3">
                        <span class="mr-15 font-weight-bold">Delivery Charge</span>
                        <span class="text-right">{{getDeliveryCharge()}}</span>
                      </div>

                      <div class="d-flex justify-content-between">
                        <span class="mr-15 font-weight-bold">Total Price</span>
                        <span class="text-right">{{getSubTotal()}}</span>
                      </div>
                    </div>





                  </div>
                </div>

              </div>


      </div>
      <div class="clearfix"></div>
    </div>
    </div>
    </div>
    </div>
    </div>
  </section>


