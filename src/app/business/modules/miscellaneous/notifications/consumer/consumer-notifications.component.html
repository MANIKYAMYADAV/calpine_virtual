<section>
  <app-breadcrumb [breadcrumbs]="breadcrumbs" [moreOptions]="breadcrumb_moreoptions"
    (performAction)="performActions($event)"></app-breadcrumb>
</section>
<section class="content comn-cls lic-page notifications">
  <div class="col-md-12 col-xs-12 col-sm-12 no-padding-small  ynw-common-form-nm">
    <div class="row">
      <div class="card w-dta p0">
        <div class="paysettings-tab col-md-6 col-xs-12 col-sm-12 no-padding">
          <div class=" col-md-12 col-xs-12 col-sm-12 mgn-up-20 mgn-bt-20">
              <label class="notifi-togl" style="display: flex">Send Notifications&nbsp;&nbsp;
                  <mat-slide-toggle
                          class="example-margin"
                          [(ngModel)]="consumerNotification"
                          (change)="handleNotificationSettings($event)">
                  </mat-slide-toggle>
              </label>
              <p class="sts" [class.active]="consumerNotification">{{notification_statusstr}}</p>
          </div>
      </div>
        <mat-accordion>
          <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header class="mgn-bt-10">
              <mat-panel-title class="block-level">{{customer_label|capitalizeFirst}} Notifications<br>
                <span class="form-level-settings">{{mode_of_notify}}</span>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="rw col-md-12 col-xs-12 col-sm-12 no-padding-small">
              <mat-accordion class="acc-btn">
                <mat-expansion-panel>
                  <mat-expansion-panel-header [collapsedHeight]="'60px'" [expandedHeight]="'60px'" class="acc-header">
                    <mat-panel-title class="block-level"> Early Notifications<br>
                      <span class="form-level-settings">Notify a {{customer_label}}, the number of people ahead of
                        him/her
                        in line via SMS/Email/Notifications</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="form-group col-md-3 col-xs-7 col-sm-4">
                    <mat-form-field class="example-full-width">
                      <input matInput min="0" max="1000" type="text" [(ngModel)]="earlyNotificatonSettings.personsAhead"
                        placeholder="{{customer_label | capitalizeFirst}}s ahead *" autocomplete="off"
                        (keypress)="showSubmit('EARLY');isNumeric($event)" (keyup)="isvalid($event)"><br>
                        <span>
                          <ul class="info-lst form-level-early-hint">
                            <li style="padding-top: 6px;">
                              The n<sup style="color: black;">th</sup> {{customer_label}} whom the notification should be send.
                            </li>
                          </ul>
                        </span>
                    </mat-form-field> 
                  </div>
                  <div class="clearfix"></div>
                  <ul class="notifications">
                    <li>
                      <span class="notification"> via SMS </span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="earlyNotificatonSettings.sms"
                        (change)="showSubmit('EARLY')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification"> via Email</span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="earlyNotificatonSettings.email"
                        (change)="showSubmit('EARLY')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification">Push notifications</span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="earlyNotificatonSettings.pushNotification"
                        (change)="showSubmit('EARLY')">
                      </mat-slide-toggle>
                    </li>
                  </ul>
                  <button *ngIf="showButton['EARLY']" (click)="changeNotificationSettings('EARLY')" type="button"
                    mat-button class="cs-btn bt1 notifyOk">OK</button>
                </mat-expansion-panel>
              </mat-accordion>
              <mat-accordion class="acc-btn">
                <mat-expansion-panel>
                  <mat-expansion-panel-header [collapsedHeight]="'60px'" [expandedHeight]="'60px'" class="acc-header">
                    <mat-panel-title class="block-level"> Pre Final Notifications <br>
                      <span class="form-level-settings">Notify a {{customer_label}} when he is second next in line via
                        SMS/Email/Notifications.</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <ul class="notifications">
                    <li>
                      <span class="notification"> via SMS </span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="prefinalNotificationSettings.sms"
                        (change)="showSubmit('PREFINAL')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification"> via Email</span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="prefinalNotificationSettings.email"
                        (change)="showSubmit('PREFINAL')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification">Push notifications</span>
                      <mat-slide-toggle class="example-margin"
                        [(ngModel)]="prefinalNotificationSettings.pushNotification" (change)="showSubmit('PREFINAL')">
                      </mat-slide-toggle>
                    </li>
                  </ul>
                  <button *ngIf="showButton['PREFINAL']" (click)="changeNotificationSettings('PREFINAL')" type="button"
                    mat-button class="cs-btn bt1 notifyOk">OK</button>
                </mat-expansion-panel>
              </mat-accordion>
              <div class="clearfix"></div>
              <mat-accordion class="acc-btn">
                <mat-expansion-panel>
                  <mat-expansion-panel-header [collapsedHeight]="'60px'" [expandedHeight]="'60px'" class="acc-header">
                    <mat-panel-title class="block-level"> Final Notifications
                      <br> <span class="form-level-settings">Notify a {{customer_label}} when he is next in line via
                        SMS/Email/Notifications.</span>
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <ul class="notifications">
                    <li>
                      <span class="notification"> via SMS </span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="finalNotificationSettings.sms"
                        (change)="showSubmit('FINAL')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification"> via Email</span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="finalNotificationSettings.email"
                        (change)="showSubmit('FINAL')">
                      </mat-slide-toggle>
                    </li>
                    <li>
                      <span class="notification">Push notifications</span>
                      <mat-slide-toggle class="example-margin" [(ngModel)]="finalNotificationSettings.pushNotification"
                        (change)="showSubmit('FINAL')">
                      </mat-slide-toggle>
                    </li>
                  </ul>
                  <button *ngIf="showButton['FINAL']" (click)="changeNotificationSettings('FINAL')" type="button"
                    mat-button class="cs-btn bt1 notifyOk">OK</button>
                </mat-expansion-panel>
              </mat-accordion>
              <div class="clearfix"></div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
        <div class="clearfix"></div>
      </div>
    </div>
  </div>
</section>