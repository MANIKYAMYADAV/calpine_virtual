<section class="container consumer-dashhome no-padding no-padding-small">
    <div class="panel panel-default">
        <div class="panel-heading top-row ">
            <app-header [headerTitle]=""></app-header>
            <!-- <div class="mgn-up-20">
                <app-search-form></app-search-form>
            </div> -->
        </div>
        <div class="panel-body no-padding">
            <div class="content consumer-dash mgn-bt-10" *ngIf="api_loading">
                <app-common-innerloading-spinner>
                </app-common-innerloading-spinner>
            </div>
            <div class="content consumer-dash" *ngIf="!api_loading">
                <div class="card c-checkins">
                    <h1 class="ng-tns-c16-8 txt-align">
                        <span class="ng-tns-c16-8">
                            Hello {{usr_details.userName}} !
                        </span> <br>
                        <button class="mgn-up-20 find-sp-btn" mat-raised-button (click)="do_search()">Find Service
                            Provider &nbsp; <i class="fa fa-search"></i></button>
                    </h1>
                    <h2 class="ng-tns-c16-8 bg-yelow">
                        <div class="jld-option">
                            <div class="col-sm-4 col-md-6 col-lg-6 col-xs-6 mgn-up-10">MY BOOKINGS</div>
                            <div class="col-sm-8 col-md-6 col-lg-6 col-xs-7">
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button class="flat-btn" mat-flat-button (click)="getmyfavourites()">My
                                        Favourites</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="getmyfavourites()">
                                        <i class="fa fa-heart"></i>
                                    </button>
                                </div>
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button class="flat-btn" mat-flat-button (click)="gotoHistory()">Past
                                        History</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="gotoHistory()">
                                        <i class="fa fa-history"></i>
                                    </button>
                                </div>
                                <div class="col-sm-4 col-md-4 col-lg-4 col-xs-4">
                                    <button (click)="paymentsClicked()" class="flat-btn" mat-flat-button>My
                                        Payments</button>
                                    <button class="flat-icon-btn" mat-flat-button (click)="paymentsClicked()">
                                        <i class="fa fa-credit-card"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </h2>
                    <div *ngIf="(appointments.length == 0 && (loadcomplete.waitlist && waitlists && waitlists.length == 0) && (loadcomplete.donations && donations && donations.length == 0))"
                        class="col-md-12 col-xs-12 col-sm-12 mgn-up-20 nocheckins">
                        <p class="locate-customer">No current Bookings available</p>
                    </div>
                    <div class="table-outer1 ng-tns-c16-57">
                        <table class="table">
                            
                            <!-- TODAY BOOKINGS  -->
                            <thead *ngIf="(today_totalbookings.length != 0)">
                                <th colspan="5">TODAY</th>
                            </thead>
                            <tbody *ngIf="today_totalbookings.length != 0">
                                <tr *ngFor="let booking of todayBookings;" class="custId-cursor" (click)="showBookingDetails(booking)">
                                    <ng-container *ngIf="booking.apptStatus">
                                        <td>
                                            <h4>{{getSingleTime(booking.appmtTime)}}</h4>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                        </td>
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                {{booking.apptStatus}}
                                                &nbsp;<i
                                                    *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                    class="fa fa-times-circle-o fa-lg red"
                                                    (click)="doCancelWaitlist(appointment,'appointment')"
                                                    matTooltip="Cancel Appointment"></i>
                                            </h6>
                                            <span *ngIf="booking.apptStatus == 'Confirmed'">
                                                <a href="{{path}}status/{{booking.appointmentEncId}}" target="blank"><u
                                                        class="font-smalr">VIEW STATUS</u></a></span>
                                        </td>
                                        <td>
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">

                                                <button class="bt3 cust-btn"
                                                    (click)="viewBill(appointment,'appointment')">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                        </td>
                                        <td>
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                    (click)="viewBill(appointment,'appointment')">View Bill</button>
                                            </span>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="booking.waitlistStatus">
                                        <td>
                                            <h4 *ngIf="!booking.token && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled')"
                                                class="now">Now</h4>
                                            <h4
                                                *ngIf="!booking.token && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')">
                                                {{booking.appxWaitingTime}}</h4>
                                            <span
                                                *ngIf="!booking.token && (booking.appxWaitingTime >= 0 && booking.waitlistStatus == 'cancelled')">{{booking.date}}</span>
                                            <h4 *ngIf="booking.token">Token No.{{booking.token}}</h4>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount)">
                                                {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                        </td>
                                        <td>
                                            <h6
                                                [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                <span
                                                    *ngIf="booking.waitlistStatus!=='done'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                &nbsp;<i
                                                    *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                    class="fa fa-times-circle-o fa-lg red"
                                                    (click)="doCancelWaitlist(waitlist,'checkin')"
                                                    matTooltip="Cancel Check-in"></i>
                                            </h6>
                                            <span *ngIf="booking.waitlistStatus == 'Confirmed'">
                                                <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"><u
                                                        class="font-smalr">VIEW STATUS</u></a></span>
                                        </td>
                                        <td>
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                <button class="bt3 cust-btn" (click)="viewBill(waitlist,'checkin')">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                        </td>
                                        <td>
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(waitlist,'checkin')">View Bill</button>
                                            </span>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="booking.donationStatus">
                                        <td><h4>{{booking.date}}</h4></td>
                                    <td class="tdisplay-block">
                                      <h4>{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                      <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                    </td>
                                    <td>
                                        <h6 class="colr-completed">{{booking.donationStatus | capitalizeFirst}}</h6>
                                        </td>
                                    <td colspan=2><h6>
                                        <i class="fa fa-inr"></i>
                                        {{booking.donationAmount}}</h6></td>
                                    </ng-container>
                                </tr> 
                                <tr *ngIf="!more_tdybookingsShow && today_totalbookings.length > 3" (click)="showMoreTdyBookings()">
                                    <td colspan="5"><a>Show more...</a></td>
                                </tr>
                                <ng-container *ngIf="more_tdybookingsShow">
                                    <tr *ngFor="let booking of todayBookings_more;" class="custId-cursor" (click)="showBookingDetails(booking)">
                                        <ng-container *ngIf="booking.apptStatus">
                                            <td>
                                                <h4>{{getSingleTime(booking.appmtTime)}}</h4>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">
                                                    {{booking.apptStatus}}
                                                    &nbsp;<i
                                                        *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'"
                                                        class="fa fa-times-circle-o fa-lg red"
                                                        (click)="doCancelWaitlist(appointment,'appointment')"
                                                        matTooltip="Cancel Appointment"></i>
                                                </h6>
                                                <span *ngIf="booking.apptStatus == 'Confirmed'">
                                                    <a href="{{path}}status/{{booking.appointmentEncId}}" target="blank"><u
                                                            class="font-smalr">VIEW STATUS</u></a></span>
                                            </td>
                                            <td>
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">
    
                                                    <button class="bt3 cust-btn"
                                                        (click)="viewBill(appointment,'appointment')">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                            </td>
                                            <td>
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'"
                                                        (click)="viewBill(appointment,'appointment')">View Bill</button>
                                                </span>
                                            </td>
                                        </ng-container>
                                        <ng-container *ngIf="booking.waitlistStatus">
                                            <td>
                                                <h4 *ngIf="!booking.token && (booking.appxWaitingTime == 0 && booking.waitlistStatus != 'cancelled')"
                                                    class="now">Now</h4>
                                                <h4
                                                    *ngIf="!booking.token && (booking.appxWaitingTime > 0 && booking.waitlistStatus != 'cancelled')">
                                                    {{booking.appxWaitingTime}}</h4>
                                                <span
                                                    *ngIf="!booking.token && (booking.appxWaitingTime >= 0 && booking.waitlistStatus == 'cancelled')">{{booking.date}}</span>
                                                <h4 *ngIf="booking.token">Token No.{{booking.token}}</h4>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount)">
                                                    {{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                            </td>
                                            <td>
                                                <h6
                                                    [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                    <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                    <span
                                                        *ngIf="booking.waitlistStatus!=='done'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                    &nbsp;<i
                                                        *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'"
                                                        class="fa fa-times-circle-o fa-lg red"
                                                        (click)="doCancelWaitlist(waitlist,'checkin')"
                                                        matTooltip="Cancel Check-in"></i>
                                                </h6>
                                                <span *ngIf="booking.waitlistStatus == 'Confirmed'">
                                                    <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"><u
                                                            class="font-smalr">VIEW STATUS</u></a></span>
                                            </td>
                                            <td>
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                    <button class="bt3 cust-btn" (click)="viewBill(waitlist,'checkin')">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                            </td>
                                            <td>
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                        (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                    <button class="bt3 cust-btn"
                                                        *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                        (click)="viewBill(waitlist,'checkin')">View Bill</button>
                                                </span>
                                            </td>
                                        </ng-container>
                                        <ng-container *ngIf="booking.donationStatus">
                                            <td><h4>{{booking.date}}</h4></td>
                                        <td class="tdisplay-block">
                                          <h4>{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                          <span class="servName">{{booking.service.name | capitalizeFirst}}</span>
                                        </td>
                                        <td>
                                            <h6 class="colr-completed">{{booking.donationStatus | capitalizeFirst}}</h6>
                                            </td>
                                        <td colspan=2><h6>
                                            <i class="fa fa-inr"></i>
                                            {{booking.donationAmount}}</h6></td>
                                        </ng-container>
                                    </tr>
                                    <tr *ngIf="more_tdybookingsShow" (click)="showlessTdyBookings()">
                                        <td colspan="5"><a>Show less...</a></td>
                                    </tr>
                                </ng-container>
                            </tbody>

                            <!-- Donation section(always today) -->

                            <!-- <tbody *ngIf="loadcomplete.donations && donations && donations.length != 0">
                                <tr *ngFor="let donation of donations; let i=index" (click)="gotoDonations()" class="custId-cursor">
                                    <td><h4>{{donation.date}}</h4></td>
                                    <td class="tdisplay-block">
                                      <h4>{{donation.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                      <span class="servName">{{donation.service.name | capitalizeFirst}}</span>
                                    </td>
                                    <td>
                                        <h6 class="colr-completed">{{donation.donationStatus | capitalizeFirst}}</h6>
                                        </td>
                                    <td colspan=2><h6>
                                        <i class="fa fa-inr"></i>
                                        {{donation.donationAmount}}</h6></td>
                                </tr>
                            </tbody> -->

                            
                            <!-- FUTURE BOOKINGS -->
                            <thead *ngIf="(future_totalbookings.length != 0)">
                                <th colspan="5">UPCOMING</th>
                            </thead>
                            <tbody *ngIf="future_totalbookings.length != 0">
                                <tr *ngFor="let booking of futureBookings;" class="custId-cursor" (click)="showBookingDetails(booking)">
                                    <ng-container *ngIf="booking.apptStatus">
                                        <td>
                                            <h4>{{getSingleTime(booking.appmtTime)}}</h4>
                                            <span>{{booking.appmtDate}}</span>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount)">{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}</span></td>
                                        <td>
                                            <h6 [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">{{booking.apptStatus}}
                                                &nbsp;<i *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'" class="fa fa-times-circle-o fa-lg red" (click)="doCancelWaitlist(appointment,'appointment')" matTooltip="Cancel Appointment"></i>
                                            </h6>
                                            <span *ngIf="booking.apptStatus == 'Confirmed'"><a href="{{path}}status/{{booking.appointmentEncId}}" target="blank"><u class="font-smalr">VIEW STATUS</u></a></span>
                                        </td>
                                        <td>
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">
    
                                                <button class="bt3 cust-btn" (click)="viewBill(appointment,'appointment')">Pay
                                                    &#8377;{{booking.amountDue}}</button>
                                            </span>
                                        </td>
                                        <td>
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn" *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'" (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                <button class="bt3 cust-btn" *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'" (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                <button class="bt3 cust-btn" *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'" (click)="viewBill(appointment,'appointment')">View Bill</button>
                                            </span>
                                        </td>
                                    </ng-container>
                                    <ng-container *ngIf="booking.waitlistStatus">
                                    <td>
                                        <h4 *ngIf="!booking.token">{{booking.serviceTime}}</h4>
                                        <h4 *ngIf="booking.token">Token No.{{booking.token}}</h4>
                                        <span>{{booking.date}}</span>
                                    </td>
                                    <td class="tdisplay-block">
                                        <h4 (click)="providerDetail(booking.providerAccount)">{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                        <span>
                                            <i class="fa phon-icon"
                                                *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                            <i class="fa meet-icon"
                                                *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                            <i class="fa zoom-icon"
                                                *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                            <i class="fa wtsapaud-icon"
                                                *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                            <i class="fa wtsapvid-icon"
                                                *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                        </span>
                                        <span class="servName">{{booking.service.name | capitalizeFirst}}</span></td>
                                    <td>
                                        <h6 [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                            <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                            <span *ngIf="booking.waitlistStatus!=='done'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                            &nbsp;<i *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'" class="fa fa-times-circle-o fa-lg red" (click)="doCancelWaitlist(waitlist,'checkin')" matTooltip="Cancel Check-in"></i>
                                           </h6>
                                           <span *ngIf="booking.waitlistStatus == 'Confirmed'">
                                            <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"><u class="font-smalr">VIEW STATUS</u></a></span>
                                        </td>
                                    <td>
                                        <span
                                            *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                            <button class="bt3 cust-btn" (click)="viewBill(waitlist,'checkin')">Pay &#8377;{{booking.amountDue}}</button>
                                        </span>
                                    </td>
                                    <td>
                                        <span *ngIf="booking.billViewStatus == 'Show'">
                                            <button class="bt3 cust-btn"
                                                *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                            <button class="bt3 cust-btn"
                                                *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                            <button class="bt3 cust-btn"
                                                *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                (click)="viewBill(waitlist,'checkin')">View Bill</button>
                                        </span>
                                    </td>
                                    </ng-container>
                                </tr>
                                <tr *ngIf="!more_futrbookingsShow && future_totalbookings.length > 3" (click)="showMoreFutrBookings()">
                                    <td colspan="5">
                                        <a>Show more...</a>
                                    </td>
                                </tr>
                                <ng-container *ngIf="more_futrbookingsShow">
                                    <tr *ngFor="let booking of futureBookings_more;" class="custId-cursor" (click)="showBookingDetails(booking)">
                                        <ng-container *ngIf="booking.apptStatus">
                                            <td>
                                                <h4>{{getSingleTime(booking.appmtTime)}}</h4>
                                                <span>{{booking.appmtDate}}</span>
                                            </td>
                                            <td class="tdisplay-block">
                                                <h4 (click)="providerDetail(booking.providerAccount)">{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                                <span>
                                                    <i class="fa phon-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                    <i class="fa meet-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                    <i class="fa zoom-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                    <i class="fa wtsapaud-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                    <i class="fa wtsapvid-icon"
                                                        *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                                </span>
                                                <span class="servName">{{booking.service.name | capitalizeFirst}}</span></td>
                                            <td>
                                                <h6 [ngClass]="{'colr-confrm':(booking.apptStatus == 'Confirmed'),'colr-arrived':(booking.apptStatus == 'Arrived'),'colr-started':(booking.apptStatus == 'Started'),'colr-canceld':(booking.apptStatus == 'Cancelled'),'colr-completed':(booking.apptStatus == 'Completed')}">{{booking.apptStatus}}
                                                    &nbsp;<i *ngIf="booking.apptStatus == 'Confirmed' || booking.apptStatus == 'Arrived' || booking.apptStatus=='prepaymentPending'" class="fa fa-times-circle-o fa-lg red" (click)="doCancelWaitlist(appointment,'appointment')" matTooltip="Cancel Appointment"></i>
                                                </h6>
                                                <span *ngIf="booking.apptStatus == 'Confirmed'"><a href="{{path}}status/{{booking.appointmentEncId}}" target="blank"><u class="font-smalr">VIEW STATUS</u></a></span>
                                            </td>
                                            <td>
                                                <span
                                                    *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'">
        
                                                    <button class="bt3 cust-btn" (click)="viewBill(appointment,'appointment')">Pay
                                                        &#8377;{{booking.amountDue}}</button>
                                                </span>
                                            </td>
                                            <td>
                                                <span *ngIf="booking.billViewStatus == 'Show'">
                                                    <button class="bt3 cust-btn" *ngIf="!(booking.amountDue>0) && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'" (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                    <button class="bt3 cust-btn" *ngIf="(booking.apptStatus === 'Cancelled' || booking.apptStatus === 'Rejected') && booking.paymentStatus !== 'NotPaid'" (click)="viewBill(appointment,'appointment')">View Receipt</button>
                                                    <button class="bt3 cust-btn" *ngIf="booking.amountDue>0 && booking.apptStatus != 'Cancelled' && booking.apptStatus != 'Rejected'" (click)="viewBill(appointment,'appointment')">View Bill</button>
                                                </span>
                                            </td>
                                        </ng-container>
                                        <ng-container *ngIf="booking.waitlistStatus">
                                        <td>
                                            <h4 *ngIf="!booking.token">{{booking.serviceTime}}</h4>
                                            <h4 *ngIf="booking.token">Token No.{{booking.token}}</h4>
                                            <span>{{booking.date}}</span>
                                        </td>
                                        <td class="tdisplay-block">
                                            <h4 (click)="providerDetail(booking.providerAccount)">{{booking.providerAccount.businessName || '' | capitalizeFirst}}</h4>
                                            <span>
                                                <i class="fa phon-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0 && booking.service.virtualCallingModes[0].callingMode === 'Phone'"></i>
                                                <i class="fa meet-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
                                                <i class="fa zoom-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
                                                <i class="fa wtsapaud-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='audioService'"></i>
                                                <i class="fa wtsapvid-icon"
                                                    *ngIf="booking.service.serviceType === 'virtualService' && booking.service.virtualCallingModes.length > 0  && booking.service.virtualCallingModes[0].callingMode === 'WhatsApp' && booking.service.virtualServiceType ==='videoService'"></i>
                                            </span>
                                            <span class="servName">{{booking.service.name | capitalizeFirst}}</span></td>
                                        <td>
                                            <h6 [ngClass]="{'colr-confrm':(booking.waitlistStatus == 'Confirmed'),'colr-arrived':(booking.waitlistStatus == 'arrived'),'colr-started':(booking.waitlistStatus == 'started'),'colr-canceld':(booking.waitlistStatus == 'cancelled'),'colr-completed':(booking.waitlistStatus == 'done')}">
                                                <span *ngIf="booking.waitlistStatus=='done'">Completed</span>
                                                <span *ngIf="booking.waitlistStatus!=='done'">{{booking.waitlistStatus | capitalizeFirst}}</span>
                                                &nbsp;<i *ngIf="booking.waitlistStatus == 'checkedIn' || booking.waitlistStatus == 'arrived' || booking.waitlistStatus=='prepaymentPending'" class="fa fa-times-circle-o fa-lg red" (click)="doCancelWaitlist(waitlist,'checkin')" matTooltip="Cancel Check-in"></i>
                                               </h6>
                                               <span *ngIf="booking.waitlistStatus == 'Confirmed'">
                                                <a href="{{path}}status/{{booking.checkinEncId}}" target="blank"><u class="font-smalr">VIEW STATUS</u></a></span>
                                            </td>
                                        <td>
                                            <span
                                                *ngIf="booking.amountDue>0 && (booking.billViewStatus=='Show') && booking.waitlistStatus != 'cancelled'">
                                                <button class="bt3 cust-btn" (click)="viewBill(waitlist,'checkin')">Pay &#8377;{{booking.amountDue}}</button>
                                            </span>
                                        </td>
                                        <td>
                                            <span *ngIf="booking.billViewStatus == 'Show'">
                                                <button class="bt3 cust-btn"
                                                    *ngIf="!(booking.amountDue>0) && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.waitlistStatus === 'cancelled' && booking.paymentStatus !== 'NotPaid'"
                                                    (click)="viewBill(waitlist,'checkin')">View Receipt</button>
                                                <button class="bt3 cust-btn"
                                                    *ngIf="booking.amountDue>0 && booking.waitlistStatus != 'cancelled'"
                                                    (click)="viewBill(waitlist,'checkin')">View Bill</button>
                                            </span>
                                        </td>
                                        </ng-container>
                                    </tr>
                                    <tr *ngIf="more_futrbookingsShow" (click)="showlessFutrBookings()">
                                        <td colspan="5">
                                            <a>Show less...</a>
                                        </td>
                                    </tr>
                                </ng-container>
                            </tbody>


                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div [innerHTML]="payment_popup" #div [style.display]="'none'"></div>