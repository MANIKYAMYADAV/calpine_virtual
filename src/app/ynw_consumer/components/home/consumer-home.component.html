
<section class="content consumer-dash">
  <div class="container">
      <div class="row">
          <!-- <h1>Consumer <span>Dashboard</span></h1> -->
          <div class="card c-chekins">
              <mat-accordion >
                <mat-expansion-panel [expanded]= 'true'>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      Current Check-Ins
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="outer">
                    <div class="list" *ngFor=" let waitlist of waitlists">
                        <div class="lt">
                            <h3 (click)="goWaitlistDetail(waitlist)">{{waitlist.provider.businessName || ''}}</h3>
                            <span class="location">{{waitlist.queue.location.place || ''}}</span>
                            <div class="est-time">
                              <span class="ttle">Estimated Waiting Time:</span>
                              <span class="time"><span class="min">{{getAppxTime(waitlist.appxWaitingTime)}}</span></span>
                            </div>
                        </div>
                        <div class="rt">
                            <ul class="controls">
                                <li  (click)="addWaitlistMessage(waitlist)"><span class="message">Message</span></li>
                                <li *ngIf="!checkIfFav(waitlist.provider.id)">
                                  <span class="add-fav" (click)="addFavProvider(waitlist.provider.id)">
                                    Add to Favourites</span>
                                </li>
                                <li *ngIf="checkIfFav(waitlist.provider.id)">
                                  <span class="add-fav favourited"
                                    (click)="doDeleteFavProvider(waitlist.provider)">
                                    Remove Favourite</span>
                                </li>
                                <li *ngIf="waitlist.waitlistStatus == 'checkedIn' || waitlist.waitlistStatus == 'arrived'">
                                  <span class="cancel" (click)="doCancelWaitlist(waitlist)">Cancel Check-in</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div *ngIf="loadcomplete.waitlist && waitlists && waitlists.length == 0">
                      <p>No current Check-Ins available</p>
                    </div>

                  </div>
                </mat-expansion-panel>
                </mat-accordion>
          </div>

          <div class="card favourites">
              <mat-accordion>
                <mat-expansion-panel [expanded]= 'true'>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      My Favourites
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <div class="outer">
                      <div class="list" *ngFor="let provider of fav_providers">
                          <div class="lt">
                              <h3>{{provider.businessName}}</h3>
                          </div>
                          <div class="rt">
                              <ul class="controls">
                                  <li><span class="checkin">Check-in</span></li>
                                  <li (click)="addCommonMessage(provider)"><span class="message">Message</span></li>
                                  <li><span class="add-fav favourited"
                                    (click)="doDeleteFavProvider(provider)">
                                    Remove Favourite</span>
                                  </li>
                              </ul>
                          </div>
                      </div>
                      <div *ngIf="loadcomplete.fav_provider && fav_providers && fav_providers.length == 0">
                        <p>You haven't added any favourite providers</p>
                      </div>
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
          </div>

          <div class="card history">
              <mat-accordion>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      History
                    </mat-panel-title>
                  </mat-expansion-panel-header>

                  <app-consumer-checkin-history-list>

                  </app-consumer-checkin-history-list>
                </mat-expansion-panel>
              </mat-accordion>
          </div>
      </div>
  </div>
</section>
