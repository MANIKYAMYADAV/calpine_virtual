<section class="cons-inbox no-padding-small" [class.container]="params.uuid">
    <div class="panel-heading top-row "
        *ngIf="params.uuid">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding">
            <app-header></app-header>
        </div>
    </div>
    <div class="card title-gb"
    *ngIf="params.uuid">
        <h5 class="mgn-up-10 bold">Questionnaire <a class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                    class="fa fa-arrow-left"></i></a></h5>
    </div>
    <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>
    <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12" *ngIf="questions" [class.card]="params.uuid">
        <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding">
            <div class="quest-outer" *ngFor="let question of questions;let i = index">
                <div class="">{{getQuestion(question).labelName}}</div>
                <span class="form-level-settings"
                    *ngIf="getQuestion(question).fieldDataType != 'Number' && getQuestion(question).fieldDataType != 'PlainText' && getQuestion(question).fieldDataType != 'Date'">{{getQuestion(question).label}}</span>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'List'">
                    <mat-checkbox class="mgn-rt-10" [checked]="isChecked(value, getQuestion(question))"
                        *ngFor="let value of getQuestion(question).labelValues"
                        (change)="listChange($event, value, getQuestion(question))">
                        {{value}}</mat-checkbox>
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'PlainText'">
                    <input type="text" matInput autocomplete="off" placeholder="{{getQuestion(question).label}}"
                        [(ngModel)]="answers[getQuestion(question).labelName]" (keyup)="onSubmit();"
                        [minlength]="getQuestion(question).plainTextPropertie.minNoOfLetter"
                        [maxlength]="getQuestion(question).plainTextPropertie.maxNoOfLetter">
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Number'">
                    <input type="number" matInput autocomplete="off" placeholder="{{getQuestion(question).label}}"
                        [(ngModel)]="answers[getQuestion(question).labelName]" (keyup)="onSubmit();"
                        [min]="getQuestion(question).numberPropertie.start" [max]="getQuestion(question).numberPropertie.end">
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'FileUpload'">
                    <input #logofile type="file" accept="/*;capture=camera" style="display:none;"
                        (change)="filesSelected($event, i, getQuestion(question))">
                    <input #logofile1 type="file" accept="/*;capture=camera" style="display:none;"
                        (change)="filesSelected($event, i, getQuestion(question))" multiple>
                    <button class="upload-btn" (click)="logofile.click()"
                        *ngIf="getQuestion(question).filePropertie.minNoOfFile == 1">Upload File</button>
                    <button class="upload-btn" (click)="logofile1.click()"
                        *ngIf="getQuestion(question).filePropertie.minNoOfFile > 1">Upload File</button>
                    <div class="error-msg" *ngIf="apiError[i]">{{apiError[i]}} </div>
                    <div *ngFor="let img of selectedMessage.files;let i = index">
                        {{img.name}}
                        <i class="fa fa-times-circle" aria-hidden="true" (click)="deleteTempImage(i, getQuestion(question).labelName)"></i>
                    </div>
                    <ng-container *ngIf="fileuploadpreAnswers[getQuestion(question).labelName]">
                    <div *ngFor="let img of fileuploadpreAnswers[getQuestion(question).labelName];let i = index">
                        <ng-container *ngIf="img"> 
                        {{img.caption}}
                        <i class="fa fa-times-circle" aria-hidden="true" (click)="deletePreImage(i, getQuestion(question).labelName)"></i>
                    </ng-container>
                    </div>
                </ng-container>
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Date'">
                    <input type="text" #date matInput [matDatepicker]="picker" autocomplete="off" tabindex="-1"
                        placeholder="{{getQuestion(question).label}}" readonly (click)="picker.open()"
                        [(ngModel)]="answers[getQuestion(question).labelName]"
                        (dateChange)="dateChange($event.value, getQuestion(question))"
                        [min]="getDate(getQuestion(question).dateProperties.startDate)"
                        [max]="getDate(getQuestion(question).dateProperties.endDate)">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker [disabled]="false"></mat-datepicker>
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Boolean'">
                    <span class="ttle mgn-rt-20">{{getQuestion(question).label}}</span>
                    <mat-slide-toggle class="example-margin" [checked]="isBooleanChecked(getQuestion(question))"
                        (change)="booleanChange($event, getQuestion(question))">
                    </mat-slide-toggle>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding" 
        *ngIf="params.uuid">
            <button mat-button class="cs-btn bt1" (click)="!buttonDisable && onSubmit('submit')">Submit</button>
        </div>
    </div>
</section>