<section class="cons-inbox no-padding-small" [class.container]="params.uuid">



    <div class="panel-heading top-row " *ngIf="params.uuid">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 no-padding">
            <app-header></app-header>
        </div>
    </div>
    <div class="card title-gb rounded-0" *ngIf="params.uuid">
        <h5 class="mgn-up-10 bold">Questionnaire <a class="pull-left mgn-rt-20 back-btn" (click)="goBack()"><i
                    class="fa fa-arrow-left"></i></a></h5>
    </div>
    <app-common-innerloading-spinner *ngIf="loading"></app-common-innerloading-spinner>



    <!-- NEW CODE -->
    <div class="d-flex flex-column-fluid">
        <!--begin::Container-->
        <div class=" container ">
            <!--begin::Card-->
            <div class="">
                <div class="">
                    <!--begin::Form-->
                    <div class="form">
                        <div class="row">
                            <div class="col-xl-12 force_center">
                                <div class="my-5">
                                    <div class="form-group row card" *ngFor="let question of questions;let i = index">
                                        <label class="col-12">{{getQuestion(question).labelName}}
                                            <span style="color: red;" *ngIf="getQuestion(question).mandatory">*</span>
                                            <div class="form-level-settings"
                                                *ngIf="getQuestion(question).fieldDataType != 'Number' && getQuestion(question).fieldDataType != 'PlainText' && getQuestion(question).fieldDataType != 'Date'">
                                                {{getQuestion(question).label}}</div>
                                        </label>


                                        <!-- for file upload -->
                                        <div class="col-8" *ngIf="getQuestion(question).fieldDataType === 'FileUpload'">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="Upload Document"
                                                    aria-describedby="basic-addon2">
                                                <div class="input-group-append" (click)="logofile.click()"><span
                                                        class="input-group-text"><i
                                                            class=" text-dark-50 flaticon-attachment"></i></span></div>
                                                <input #logofile type="file" accept="/*;capture=camera" style="display:none;"
                                                (change)="filesSelected($event, i, getQuestion(question))">
                                            </div>
                                        </div>



                                        <!-- for checkbox -->
                                        <div class="col-7" *ngIf="getQuestion(question).fieldDataType === 'List'">
                                        <div class="checkbox-list">
                                            <label class="checkbox"
                                                *ngFor="let value of getQuestion(question).labelValues">
                                                <input type="checkbox"
                                                    [checked]="isChecked(value, getQuestion(question))"
                                                    (change)="listChange($event, value, getQuestion(question))">
                                                <span></span>
                                                {{value}}
                                            </label>
                                        </div>

                                        <!-- <div class="radio-list">
                                            <label class="radio">
                                                <input type="radio" name="radios2">
                                                <span></span>
                                                Option 1
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="radios2">
                                                <span></span>
                                                Option 2
                                            </label>
                                            <label class="radio">
                                                <input type="radio" name="radios2">
                                                <span></span>
                                                Option 3
                                            </label>
                                        </div> -->

                                    </div>

                                    
                                        <!-- for Text -->
                                        <div class="col-8" *ngIf="getQuestion(question).fieldDataType === 'PlainText'">
                                            <input placeholder="{{getQuestion(question).label}}"
                                                [(ngModel)]="answers[getQuestion(question).labelName]"
                                                (input)="onSubmit();"
                                                [minlength]="getQuestion(question).plainTextPropertie.minNoOfLetter"
                                                [maxlength]="getQuestion(question).plainTextPropertie.maxNoOfLetter"
                                                class="form-control1 form-control-solid" type="text">
                                        </div>

                                        <!-- for Number -->
                                        <div class="col-8" *ngIf="getQuestion(question).fieldDataType === 'PlainText'">
                                            <!-- <input placeholder="{{getQuestion(question).label}}"
                                        [(ngModel)]="answers[getQuestion(question).labelName]" (input)="onSubmit();"
                                        [min]="getQuestion(question).numberPropertie.start"
                                        [max]="getQuestion(question).numberPropertie.end" class="form-control1 form-control-solid" type="number"> -->
                                        </div>

                                        <!-- for Date -->
                                        <div class="col-8" *ngIf="getQuestion(question).fieldDataType === 'Date'">
                                            <!-- <input type="text" #date matInput [matDatepicker]="picker" autocomplete="off" tabindex="-1"
                                            placeholder="{{getQuestion(question).label}}" readonly (click)="picker.open()"
                                            [(ngModel)]="answers[getQuestion(question).labelName]"
                                            (dateChange)="dateChange($event.value, getQuestion(question))"
                                            [min]="getDate(getQuestion(question).dateProperties.startDate)"
                                            [max]="getDate(getQuestion(question).dateProperties.endDate)">
                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                        <mat-datepicker #picker [disabled]="false"></mat-datepicker> -->
                                            <input class="form-control1" type="date" value="2011-08-19"
                                                id="example-date-input">
                                        </div>

                                        <!-- for toggel btn(boolean) -->
                                        <div class="col-8" *ngIf="getQuestion(question).fieldDataType === 'Boolean'">

                                            <!-- <mat-slide-toggle class="example-margin"
                                            [checked]="isBooleanChecked(getQuestion(question))"
                                            (change)="booleanChange($event, getQuestion(question))">
                                        </mat-slide-toggle> -->
                                            <span class="switch switch-sm switch-icon">
                                                <label>
                                                    <input type="checkbox"
                                                        checked="isBooleanChecked(getQuestion(question))"
                                                        (change)="booleanChange($event, getQuestion(question))">
                                                    <span></span>
                                                </label>
                                            </span>
                                        </div>

                                    </div>


                                </div>
                                <div class="separator separator-dashed my-10"></div>

                            </div>
                        </div>
                    </div>
                    <!--end::Form-->
                </div>
            </div>
            <!--end::Card-->
        </div>
        <!--end::Container-->
    </div>




















    <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 rounded-0 mt-5" *ngIf="!loading && questions"
        [class.card]="params.uuid">
        <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding">











            <div class="quest-outer" *ngFor="let question of questions;let i = index">
                <div class="">{{getQuestion(question).labelName}} <span *ngIf="getQuestion(question).mandatory">*</span>
                </div>
                <span class="form-level-settings"
                    *ngIf="getQuestion(question).fieldDataType != 'Number' && getQuestion(question).fieldDataType != 'PlainText' && getQuestion(question).fieldDataType != 'Date'">{{getQuestion(question).label}}
                </span>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'List'">
                    <mat-checkbox class="mgn-rt-10" [checked]="isChecked(value, getQuestion(question))"
                        *ngFor="let value of getQuestion(question).labelValues"
                        (change)="listChange($event, value, getQuestion(question))">
                        {{value}}</mat-checkbox>
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'PlainText'">
                    <input type="text" matInput autocomplete="off" placeholder="{{getQuestion(question).label}}"
                        [(ngModel)]="answers[getQuestion(question).labelName]" (input)="onSubmit();"
                        [minlength]="getQuestion(question).plainTextPropertie.minNoOfLetter"
                        [maxlength]="getQuestion(question).plainTextPropertie.maxNoOfLetter">
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Number'">
                    <input type="number" matInput autocomplete="off" placeholder="{{getQuestion(question).label}}"
                        [(ngModel)]="answers[getQuestion(question).labelName]" (input)="onSubmit();"
                        [min]="getQuestion(question).numberPropertie.start"
                        [max]="getQuestion(question).numberPropertie.end">
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'FileUpload'">
                    <input #logofile type="file" accept="/*;capture=camera" style="display:none;"
                        (change)="filesSelected($event, i, getQuestion(question))">

                    <button class="upload-btn" (click)="logofile.click()"
                        *ngIf="getQuestion(question).filePropertie.maxNoOfFile == 1">Upload File</button>


                    <!-- <div *ngIf="getQuestion(question).filePropertie.maxNoOfFile > 1">
                        <mat-select placeholder="Catalogue" [(ngModel)]="selectedDocs" [multiple]="true">
                            <mat-option *ngFor="let option of getQuestion(question).filePropertie.allowedDocuments"
                            (click)="selectUploadDocuments(getQuestion(question).labelName, option)">
                            {{option}}
                        </mat-option>
                          </mat-select>
                    </div>
                    <div
                        *ngIf="documentsToUpload[getQuestion(question).labelName] && documentsToUpload[getQuestion(question).labelName].length > 0">
                        <div *ngFor="let document of documentsToUpload[getQuestion(question).labelName]">
                            {{document}}
                            <input #logofile1 type="file" accept="/*;capture=camera" style="display:none;"
                            (change)="filesSelected($event, i, getQuestion(question), document)">
                            <button class="upload-btn" (click)="logofile1.click()">Upload File</button>
                        </div>
                    </div> -->


                    <!-- <div class="error-msg" *ngIf="apiError[i]">{{apiError[i]}} </div> -->
                    <div *ngFor="let img of selectedMessage.files;let i = index">
                        {{img.name}}
                        <i class="fa fa-times-circle" aria-hidden="true"
                            (click)="deleteTempImage(i, getQuestion(question).labelName)"></i>
                    </div>
                    <ng-container *ngIf="fileuploadpreAnswers[getQuestion(question).labelName]">
                        <div *ngFor="let img of fileuploadpreAnswers[getQuestion(question).labelName];let i = index">
                            <ng-container *ngIf="img">
                                {{img.caption}}
                                <i class="fa fa-times-circle" aria-hidden="true"
                                    (click)="deletePreImage(i, getQuestion(question).labelName)"></i>
                            </ng-container>
                        </div>
                    </ng-container>
                </div>

                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Date'">
                    <input type="text" #date matInput [matDatepicker]="picker" autocomplete="off" tabindex="-1"
                        placeholder="{{getQuestion(question).label}}" readonly (click)="picker.open()"
                        [(ngModel)]="answers[getQuestion(question).labelName]"
                        (dateChange)="dateChange($event.value, getQuestion(question))"
                        [min]="getDate(getQuestion(question).dateProperties.startDate)"
                        [max]="getDate(getQuestion(question).dateProperties.endDate)">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker [disabled]="false"></mat-datepicker>
                </div>
                <div class="question-box" *ngIf="getQuestion(question).fieldDataType === 'Boolean'">
                    <span class="ttle mgn-rt-20">{{getQuestion(question).label}}</span>
                    <mat-slide-toggle class="example-margin" [checked]="isBooleanChecked(getQuestion(question))"
                        (change)="booleanChange($event, getQuestion(question))">
                    </mat-slide-toggle>
                </div>
            </div>
        </div>
        <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 no-padding" *ngIf="params.uuid">
            <button mat-button class="cs-btn bt1" (click)="!buttonDisable && onSubmit('submit')">Submit</button>
        </div>
    </div>
</section>