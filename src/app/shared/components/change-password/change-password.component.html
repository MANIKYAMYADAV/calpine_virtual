
<app-header [headerTitle]="'Change Password'"></app-header>

<form [formGroup]="spForm" novalidate
(ngSubmit)="spForm.valid && onSubmit(spForm.value)"
(keyup)="resetApiErrors()">
    <mat-form-field>
      <input matInput placeholder="Old Password"
      [formControl]="spForm.controls['old_password']">
    </mat-form-field>
    <app-field-error-display [displayError]="fed_service.isFieldValid(spForm,'old_password')"
    [errorMsgs]="fed_service.getErrorMessage(spForm,'old_password',
    {'required' : 'Old Password Required',
    'pattern' : 'Must have atleast one uppercase letter , atleast one number and minimum 8 characters'})">
    </app-field-error-display>

    <mat-form-field>
        <input matInput placeholder="New Password"
        [formControl]="spForm.controls['new_password']"
        validateEqual="confirm_password" reverse="true" type="password">
    </mat-form-field>
    <app-field-error-display [displayError]="fed_service.isFieldValid(spForm,'new_password')"
    [errorMsgs]="fed_service.getErrorMessage(spForm,'new_password',
    {'required' : 'New Password Required',
    'pattern' : 'Must have atleast one uppercase letter , atleast one number and minimum 8 characters'})">
   </app-field-error-display>

    <mat-form-field>
        <input matInput placeholder="Confirm Password"
        [formControl]="spForm.controls['confirm_password']"
        validateEqual="new_password" type="password">
    </mat-form-field>
    <app-field-error-display [displayError]="fed_service.isFieldValid(spForm,'confirm_password')"
    errorMsg="Confirm your password">
   </app-field-error-display>

    <button  type="submit" mat-button  [disabled]="!spForm.valid">Submit</button>

</form>

<button  routerLink="/">Back to Home</button>

<app-field-error-display [displayError]="true" *ngIf="api_error"
errorMsg="{{api_error}}"></app-field-error-display>

<app-form-success-display [displayMsg]="true" *ngIf="api_success"
successMsg="{{api_success}}"></app-form-success-display>
