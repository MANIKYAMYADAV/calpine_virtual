<app-header *ngIf="page_source === 'pro-details'" [headerTitle]="'Header'" >
</app-header>
<div class="card sp no-padding">
  <div class="c-ot" style="margin-bottom: 10px;
        margin-top: 10px" *ngIf="selectedDepartment && fiterByDept">
    <div class="item col-md-8 col-xs-12" *ngIf="selectedDepartment.departmentDescription" style="font-weight: 600;">
      <span> {{selectedDepartment.departmentDescription}}</span>
    </div>
  </div>
  <div class="dept-services col-xs-12 col-md-12 col-sm-12 col-lg-12" *ngIf="!api_loading && showService && serviceJson && serviceJson.length > 0">
    <h6 >{{services_offered}}</h6>
    <ul>
      <li *ngFor="let service of serviceJson" (click)="showServiceDetail(service, businessjson.businessName)">
        <span *ngIf="service.serviceType === 'virtualService'">
          <i class="fa phon-icon"
            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'Phone'"></i>
          <i class="fa meet-icon"
            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'GoogleMeet'"></i>
          <i class="fa zoom-icon"
            *ngIf="service.virtualCallingModes && service.virtualCallingModes[0].callingMode === 'Zoom'"></i>
          <i class="fa wtsapaud-icon"
            *ngIf="service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'audioService'"></i>
            <i class="fa wtsapvid-icon"
            *ngIf="service.virtualCallingModes[0].callingMode === 'WhatsApp' && service.virtualServiceType === 'videoService'"></i>
        </span>
        &nbsp;{{service.name | capitalizeFirst}}</li>
    </ul>
  </div>
  <app-common-innerloading-spinner *ngIf="api_loading"></app-common-innerloading-spinner>
  <ng-container *ngIf="!api_loading && !showService">
    <div class="col-md-12 no-padding" *ngIf="businessjson.accountType === 'BRANCH' && usersList && usersList.length > 0"
      style="padding: 0px">
      <div class="srlst provider-det col-md-12 col-lg-12 col-xs-12 col-xs-12 no-padding" *ngFor="let search_result of usersList">
        <div class="panel-body">
          <div class="col-md-3 col-xs-12 col-sm-4 col-lg-3">
            <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12 centresmall">
              <img alt="Profile Image" *ngIf="search_result.bProfile?.logo && search_result.bProfile?.logo?.url"
                [src]="search_result.bProfile.logo.url" id="profile-image1" class="img-circle img-responsive">
            </div>
          </div>
          <div class="col-md-9 col-xs-12 col-sm-8 col-lg-9 no-padding bus-title-content">
            <div class="col-md-8 col-xs-12 col-sm-12 col-lg-9 no-padding">
              <div class="no-padding">
                <h3 (click)="providerDetClicked(search_result)">
                  {{search_result.bProfile?.businessName | capitalizeFirst}}</h3>
                <div class="clearfix"></div>
                <div *ngIf="search_result.bProfile?.specialization.length == 1" class="question-header">Specialization
                </div>
                <div *ngIf="search_result.bProfile?.specialization.length > 1" class="question-header">Specializations
                </div>
                <div class="question-value1">
                  <span *ngFor="let spec of search_result.bProfile?.specialization; let i = index;"
                    style="display: inline-block;margin-right:10px">
                    {{spec}}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bottom-sect"
          *ngIf="search_result['estimatedtime_det'] && search_result['estimatedtime_det']['waitlist'] && businessjson.onlinePresence">
          <div class="bt-l">
            <div class="wt-tme"
              *ngIf="search_result['estimatedtime_det'] && search_result['estimatedtime_det']['message']!='No active services'">
              <div class="wt-tme notallowed">
                <ng-container *ngIf="search_result['estimatedtime_det']['message']">
                  {{search_result['estimatedtime_det']['message']}}</ng-container>
              </div>
              <div
                *ngIf="search_result['estimatedtime_det']['calculationMode']!='NoCalc' ||(search_result['estimatedtime_det']['calculationMode']=='NoCalc' && search_result['estimatedtime_det']['showToken'])">
                <div *ngIf="search_result['estimatedtime_det']['personAhead']">
                  <b>{{search_result['estimatedtime_det']['personAhead']}} </b><span class="people-ahead"
                    *ngIf="search_result['estimatedtime_det']['personAhead'] > 1">{{people_ahead}}</span>
                  <span class="people-ahead"
                    *ngIf="search_result['estimatedtime_det']['personAhead'] == 1">{{one_person_ahead}}</span>
                </div>
                <div *ngIf="search_result['estimatedtime_det']['personAhead'] === 0">
                  <div class="time-data">
                    {{search_result['estimatedtime_det']['personAhead']}}
                    {{people_ahead}} </div>Be the first in line
                </div>
              </div>
            </div>
          </div>
          <div style="flex-grow:1"></div>
          <div class="bottom-actions-root"
            *ngIf="search_result['estimatedtime_det'] && (search_result['estimatedtime_det']['onlineCheckIn'] || search_result['estimatedtime_det']['futureWaitlist'])">
            <div class="checkin-est nrm"
              *ngIf="!search_result['estimatedtime_det']['message'] && search_result['estimatedtime_det']['calculationMode']!='NoCalc'">
              <span class="est-time"
                *ngIf="search_result['estimatedtime_det']['caption']">{{search_result['estimatedtime_det']['caption']}}</span>
              <span class="time-data"
                *ngIf="search_result['estimatedtime_det']['time']">{{search_result['estimatedtime_det']['time']}}
              </span>
            </div>
            <ng-container
              *ngIf="search_result['estimatedtime_det']['calculationMode']=='NoCalc' && search_result['estimatedtime_det']['showToken']">
              <ng-container
                *ngIf="search_result['estimatedtime_det']['personAhead'] || search_result['estimatedtime_det']['personAhead'] === 0">
                <div class="checkin-est" style="margin-bottom: 5px" *ngIf="!search_result['opennow']">
                  <span class="est-time">Next Available Time</span>
                  <span class="time-data">{{search_result['estimatedtime_det']['nextAvailDate']}}</span>
                </div>
              </ng-container>
            </ng-container>
            <span class="checkin-btn" (click)="checkinClicked(search_result)"
              *ngIf="((search_result['estimatedtime_det']['onlineCheckIn'] && search_result['estimatedtime_det']['isAvailableToday'] && search_result['estimatedtime_det']['availableToday'])
              || (search_result['estimatedtime_det']['cdate'] && search_result['estimatedtime_det']['futureWaitlist'])) && !search_result['estimatedtime_det']['showToken']">{{getTerminologyTerm('waitlist')}}</span>
            <span class="checkin-btn" (click)="checkinClicked(search_result)"
              *ngIf="((search_result['estimatedtime_det']['onlineCheckIn'] && search_result['estimatedtime_det']['isAvailableToday'] && search_result['estimatedtime_det']['availableToday'])
              || (search_result['estimatedtime_det']['cdate'] && search_result['estimatedtime_det']['futureWaitlist'])) && search_result['estimatedtime_det']['showToken']">{{get_token_btn}}</span>
            <span class="checkin-btn disabled"
              *ngIf="!search_result['estimatedtime_det']['showToken'] && 
              (!search_result['estimatedtime_det']['onlineCheckIn'] || !search_result['estimatedtime_det']['isAvailableToday'] || 
              !search_result['estimatedtime_det']['availableToday']) && (!search_result['estimatedtime_det']['cdate'] || !search_result['estimatedtime_det']['futureWaitlist'])">{{getTerminologyTerm('waitlist')}}</span>
            <span class="checkin-btn disabled"
              *ngIf="search_result['estimatedtime_det']['showToken'] && (!search_result['estimatedtime_det']['onlineCheckIn'] || !search_result['estimatedtime_det']['isAvailableToday'] || !search_result['estimatedtime_det']['availableToday'])
              && (!search_result['estimatedtime_det']['cdate'] || !search_result['estimatedtime_det']['futureWaitlist'])">{{get_token_btn}}</span>
          </div>
        </div>
        <div class="bottom-sect pdetail" *ngIf="search_result.apptAllowed && businessjson.onlinePresence">
          <div style="flex-grow:1"></div>
          <div class="bottom-actions-root">
            <span (click)="appointmentClicked(search_result)" class="checkin-btn">Appointment</span>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>