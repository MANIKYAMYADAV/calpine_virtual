
<app-header [headerTitle]="'Change Password'"></app-header>
<div *ngIf="step==1">
  <form [formGroup]="spForm" novalidate
  (ngSubmit)="spForm.valid && onSubmit(spForm.value)"
  (keyup)="resetApiErrors()">

    <div class="form-group">
      <label class="col-form-label" for="email">Email *</label>
      <input type="text" class="form-control" id="email" placeholder="Email"
      formControlName="email" (keyup)="isVerified(spForm.controls['email'].value)">
      <app-field-error-display [displayError]="fed_service.isFieldValid(spForm,'email')"
      errorMsg="Please enter a valid email.">
    </app-field-error-display>

    </div>
    {{is_verified}}
    <button  type="submit" mat-button  [disabled]="!spForm.valid || is_verified">Submit</button>

  </form>

</div>

<div class="example-container" *ngIf="step==2">
  <app-otp-form [type]="'change_email'" [submitdata]="submit_data"  (onOtpSubmit)="onOtpSubmit($event)" (resetApiErrors)="resetApiErrors()"
  (resendOtp)="resendOtp($event)"></app-otp-form>
</div>

<button  routerLink="/">Back to Home</button>

<app-field-error-display [displayError]="true" *ngIf="api_error"
errorMsg="{{api_error}}"></app-field-error-display>

<app-form-success-display [displayMsg]="true" *ngIf="api_success"
successMsg="{{api_success}}"></app-form-success-display>
