<section>
  <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>
</section>
<section>
  <div class="content see-pages">
    <div class="container">
      <div class="outer-card">
        <div class="card">
          <div *ngIf="step==1" class="change-phone-div">
            <form [formGroup]="spForm" novalidate (ngSubmit)="spForm.valid && onSubmit(spForm.value)" (keyup)="resetApiErrors()">

               <div class="form-group phonenumber">
                <label class="col-form-label" for="phonenumber">Old Mobile</label>
                <div>{{prev_phonenumber}} <span *ngIf="is_verified" class="verified">({{verified_cap}})</span></div>
              </div> 
              <div class="form-group mobilecont">
                  <!-- (keyup)="isVerified(spForm.controls['phonenumber'].value)" -->
                <label class="col-form-label" for="phonenumber">New {{mobile_cap}}</label>
                <span class="phoneprefix">{{mob_prefix_cap}}</span>
                <input type="text" class="form-control" id="phonenumber" placeholder="Enter New Mobile #" formControlName="phonenumber"
                 autocomplete="off" ngModel maxlength="10">
                <app-field-error-display [displayError]="fed_service.isFieldValid(spForm,'phonenumber')" [errorMsgs]="fed_service.getErrorMessage(spForm,'phonenumber',
              {
                'required' : 'Phone number is required',
                'minlength' : 'Enter a 10 digit mobile number',
                'maxlength' : 'Enter a 10 digit mobile number',
                'pattern' : 'Only numbers are allowed'
              })">
                </app-field-error-display>
              </div>
              <button type="submit" mat-button [disabled]="(spForm.controls['phonenumber'].value === prev_phonenumber) || !spForm.valid">{{save_btn_cap}}</button>
            </form>
          </div>

          <div class="example-container otpouter" *ngIf="step==2">
            <app-otp-form [type]="'forgot_password'" [submitdata]="submit_data" (retonOtpSubmit)="onOtpSubmit($event)"
              (resetApiErrors)="resetApiErrors()" (resendOtp)="resendOtp($event)"></app-otp-form>
          </div>

          <app-field-error-display [displayError]="true" *ngIf="api_error" errorMsg="{{api_error}}"></app-field-error-display>

          <app-form-success-display [displayMsg]="true" *ngIf="api_success" successMsg="{{api_success}}"></app-form-success-display>
        </div>
        <div class="right-menu">
          <div class="right-menu-header">{{related_links_cap}}</div>
          <ul class="related-link">
            <li (click)="shared_functions.redirectto('profile')" class="icon-profile">{{user_profile_cap}}</li>
            <li (click)="shared_functions.redirectto('change-password')" class="icon-password">{{change_pass_cap}}</li>
            <li (click)="shared_functions.redirectto('change-email')" class="icon-inbox">{{add_change_email_cap}}</li>
            <li (click)="shared_functions.redirectto('members')" class="icon-members" *ngIf="curtype=='consumer'">{{family_members_cap}}</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>